{"abi":[{"type":"constructor","inputs":[{"name":"_vault","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"MAX_INT256","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"_getNextGlobalAveragePrice","inputs":[{"name":"_averagePrice","type":"uint256","internalType":"uint256"},{"name":"_nextPrice","type":"uint256","internalType":"uint256"},{"name":"_nextSize","type":"uint256","internalType":"uint256"},{"name":"_delta","type":"uint256","internalType":"uint256"},{"name":"_realisedPnl","type":"int256","internalType":"int256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"pure"},{"type":"function","name":"data","inputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"getGlobalShortDelta","inputs":[{"name":"_token","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"},{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getNextGlobalShortData","inputs":[{"name":"_account","type":"address","internalType":"address"},{"name":"_collateralToken","type":"address","internalType":"address"},{"name":"_indexToken","type":"address","internalType":"address"},{"name":"_nextPrice","type":"uint256","internalType":"uint256"},{"name":"_sizeDelta","type":"uint256","internalType":"uint256"},{"name":"_isIncrease","type":"bool","internalType":"bool"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"},{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getRealisedPnl","inputs":[{"name":"_account","type":"address","internalType":"address"},{"name":"_collateralToken","type":"address","internalType":"address"},{"name":"_indexToken","type":"address","internalType":"address"},{"name":"_sizeDelta","type":"uint256","internalType":"uint256"},{"name":"_isIncrease","type":"bool","internalType":"bool"}],"outputs":[{"name":"","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"globalShortAveragePrices","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"gov","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"isGlobalShortDataReady","inputs":[],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isHandler","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"setGov","inputs":[{"name":"_gov","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setHandler","inputs":[{"name":"_handler","type":"address","internalType":"address"},{"name":"_isActive","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setInitData","inputs":[{"name":"_tokens","type":"address[]","internalType":"address[]"},{"name":"_averagePrices","type":"uint256[]","internalType":"uint256[]"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setIsGlobalShortDataReady","inputs":[{"name":"value","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateGlobalShortData","inputs":[{"name":"_account","type":"address","internalType":"address"},{"name":"_collateralToken","type":"address","internalType":"address"},{"name":"_indexToken","type":"address","internalType":"address"},{"name":"_isLong","type":"bool","internalType":"bool"},{"name":"_sizeDelta","type":"uint256","internalType":"uint256"},{"name":"_markPrice","type":"uint256","internalType":"uint256"},{"name":"_isIncrease","type":"bool","internalType":"bool"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"vault","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract IVault"}],"stateMutability":"view"},{"type":"event","name":"GlobalShortDataUpdated","inputs":[{"name":"token","type":"address","indexed":true,"internalType":"address"},{"name":"globalShortSize","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"globalShortAveragePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false}],"bytecode":{"object":"0x608060405234801561001057600080fd5b5060405161119938038061119983398101604081905261002f91610062565b60008054336001600160a01b031991821617909155600180549091166001600160a01b0392909216919091179055610092565b60006020828403121561007457600080fd5b81516001600160a01b038116811461008b57600080fd5b9392505050565b6110f8806100a16000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c80639cb7de4b11610097578063bbd9718711610066578063bbd9718714610271578063cfad57a214610284578063f3238cec14610297578063fbfa77cf146102aa57600080fd5b80639cb7de4b146101f95780639cdeb5931461020c578063a83b75fd14610234578063b364accb1461024757600080fd5b806346ea87af116100d357806346ea87af146101865780635886b711146101b957806362749803146101cc5780639a11178f146101ec57600080fd5b80630147fb0c14610105578063122e7b071461013857806312d43a51146101465780633d30cabf14610171575b600080fd5b610125610113366004610c23565b60036020526000908152604090205481565b6040519081526020015b60405180910390f35b6101256001600160ff1b0381565b600054610159906001600160a01b031681565b6040516001600160a01b03909116815260200161012f565b61018461017f366004610c4d565b6102bd565b005b6101a9610194366004610c8d565b60026020526000908152604090205460ff1681565b604051901515815260200161012f565b6101256101c7366004610ca8565b610303565b6101256101da366004610c8d565b60046020526000908152604090205481565b6005546101a99060ff1681565b610184610207366004610ce3565b61035b565b61021f61021a366004610d1a565b610406565b6040805192835260208301919091520161012f565b610125610242366004610d84565b61055e565b61025a610255366004610c8d565b610744565b60408051921515835260208301919091520161012f565b61018461027f366004610e32565b6108a6565b610184610292366004610c8d565b6109b2565b6101846102a5366004610e9e565b610a54565b600154610159906001600160a01b031681565b6000546001600160a01b031633146102f05760405162461bcd60e51b81526004016102e790610f1c565b60405180910390fd5b6005805460ff1916911515919091179055565b600080600061031485898987610b52565b9150915060008261032e576103298288610f61565b610338565b6103388288610f7a565b610342888a610f8d565b61034c9190610fa4565b93505050505b95945050505050565b6000546001600160a01b031633146103855760405162461bcd60e51b81526004016102e790610f1c565b6001600160a01b0382166103db5760405162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20696e76616c6964205f68616e646c65720060448201526064016102e7565b6001600160a01b03919091166000908152600260205260409020805460ff1916911515919091179055565b6000806000610418898989888861055e565b6001600160a01b03881660009081526004602052604081205491925087821161044a576104458289610f7a565b610454565b6104548883610f7a565b60015460405163114f1b5560e31b81526001600160a01b038c8116600483015292935060009283928392911690638a78daa890602401602060405180830381865afa1580156104a7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104cb9190610fc6565b9050886104e1576104dc8a82610f7a565b6104eb565b6104eb8a82610f61565b9250826000036105075760008097509750505050505050610553565b8460000361052057828b97509750505050505050610553565b8461052b8583610f8d565b6105359190610fa4565b9150506000610547858c85858a610303565b92975091955050505050505b965096945050505050565b6000811561056e57506000610352565b600154604051634a3f088d60e01b81526001600160a01b0388811660048301528781166024830152868116604483015260006064830181905292169190819081908490634a3f088d9060840161010060405180830381865afa1580156105d8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105fc9190610fdf565b9750505050509350509250600080856001600160a01b0316635c07eaab8b87876000886040518663ffffffff1660e01b815260040161066a9594939291906001600160a01b039590951685526020850193909352604084019190915215156060830152608082015260a00190565b6040805180830381865afa158015610686573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106aa9190611049565b90925090506000856106bc838c610f8d565b6106c69190610fa4565b90506001600160ff1b03811061071e5760405162461bcd60e51b815260206004820152601760248201527f53686f727473547261636b65723a206f766572666c6f7700000000000000000060448201526064016102e7565b826107315761072c81611077565b610733565b805b9d9c50505050505050505050505050565b60015460405163114f1b5560e31b81526001600160a01b0383811660048301526000928392839290911690638a78daa890602401602060405180830381865afa158015610795573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b99190610fc6565b6001600160a01b0385166000908152600460205260408120549192508290036107e9575060009485945092505050565b600154604051637092736960e11b81526001600160a01b038781166004830152600092169063e124e6d290602401602060405180830381865afa158015610834573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108589190610fc6565b905060008183116108725761086d8383610f7a565b61087c565b61087c8284610f7a565b905060008361088b8387610f8d565b6108959190610fa4565b929093119791965090945050505050565b6000546001600160a01b031633146108d05760405162461bcd60e51b81526004016102e790610f1c565b60055460ff16156109235760405162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20616c7265616479206d696772617465640060448201526064016102e7565b60005b8381101561099e5782828281811061094057610940611093565b905060200201356004600087878581811061095d5761095d611093565b90506020020160208101906109729190610c8d565b6001600160a01b0316815260208101919091526040016000205580610996816110a9565b915050610926565b50506005805460ff19166001179055505050565b6000546001600160a01b031633146109dc5760405162461bcd60e51b81526004016102e790610f1c565b6001600160a01b038116610a325760405162461bcd60e51b815260206004820181905260248201527f476f7665726e61626c653a205f676f76206973207a65726f206164647265737360448201526064016102e7565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b3360009081526002602052604090205460ff16610ab35760405162461bcd60e51b815260206004820152601860248201527f53686f727473547261636b65723a20666f7262696464656e000000000000000060448201526064016102e7565b8380610abd575082155b610b495760055460ff1615610b4957600080610add898989878988610406565b91509150610b0287826001600160a01b03909116600090815260046020526040902055565b60408051838152602081018390526001600160a01b038916917fd6137be44db128ffcf1ea1821dbe8f889f67f949be7656c2d8acba2a4a891a02910160405180910390a250505b50505050505050565b6000808385118015610bb5576000841315610b955786841115610b8457610b798785610f7a565b965060009050610bab565b610b8e8488610f7a565b9650610bab565b610b9e84611077565b610ba89088610f61565b96505b9150859050610c1a565b6000841315610bcf57610bc88488610f61565b9650610c14565b86610bd985611077565b1115610bfe5786610be985611077565b610bf39190610f7a565b965060019050610c14565b610c0784611077565b610c119088610f7a565b96505b91508590505b94509492505050565b600060208284031215610c3557600080fd5b5035919050565b8015158114610c4a57600080fd5b50565b600060208284031215610c5f57600080fd5b8135610c6a81610c3c565b9392505050565b80356001600160a01b0381168114610c8857600080fd5b919050565b600060208284031215610c9f57600080fd5b610c6a82610c71565b600080600080600060a08688031215610cc057600080fd5b505083359560208501359550604085013594606081013594506080013592509050565b60008060408385031215610cf657600080fd5b610cff83610c71565b91506020830135610d0f81610c3c565b809150509250929050565b60008060008060008060c08789031215610d3357600080fd5b610d3c87610c71565b9550610d4a60208801610c71565b9450610d5860408801610c71565b9350606087013592506080870135915060a0870135610d7681610c3c565b809150509295509295509295565b600080600080600060a08688031215610d9c57600080fd5b610da586610c71565b9450610db360208701610c71565b9350610dc160408701610c71565b9250606086013591506080860135610dd881610c3c565b809150509295509295909350565b60008083601f840112610df857600080fd5b50813567ffffffffffffffff811115610e1057600080fd5b6020830191508360208260051b8501011115610e2b57600080fd5b9250929050565b60008060008060408587031215610e4857600080fd5b843567ffffffffffffffff80821115610e6057600080fd5b610e6c88838901610de6565b90965094506020870135915080821115610e8557600080fd5b50610e9287828801610de6565b95989497509550505050565b600080600080600080600060e0888a031215610eb957600080fd5b610ec288610c71565b9650610ed060208901610c71565b9550610ede60408901610c71565b94506060880135610eee81610c3c565b93506080880135925060a0880135915060c0880135610f0c81610c3c565b8091505092959891949750929550565b60208082526015908201527423b7bb32b93730b136329d103337b93134b23232b760591b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b80820180821115610f7457610f74610f4b565b92915050565b81810381811115610f7457610f74610f4b565b8082028115828204841417610f7457610f74610f4b565b600082610fc157634e487b7160e01b600052601260045260246000fd5b500490565b600060208284031215610fd857600080fd5b5051919050565b600080600080600080600080610100898b031215610ffc57600080fd5b885197506020890151965060408901519550606089015194506080890151935060a0890151925060c089015161103181610c3c565b8092505060e089015190509295985092959890939650565b6000806040838503121561105c57600080fd5b825161106781610c3c565b6020939093015192949293505050565b6000600160ff1b820161108c5761108c610f4b565b5060000390565b634e487b7160e01b600052603260045260246000fd5b6000600182016110bb576110bb610f4b565b506001019056fea2646970667358221220836abbdd808342f2d2fad6a1d2a3dbf9bab9e03a96d8e652a40553b88266e2d364736f6c63430008120033","sourceMap":"170:7002:48:-:0;;;772:67;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;133:3:27;:16;;139:10;-1:-1:-1;;;;;;133:16:27;;;;;;;-1:-1:-1;810:22:48;;;;;-1:-1:-1;;;;;810:22:48;;;;;;;;;;170:7002;;14:290:177;84:6;137:2;125:9;116:7;112:23;108:32;105:52;;;153:1;150;143:12;105:52;179:16;;-1:-1:-1;;;;;224:31:177;;214:42;;204:70;;270:1;267;260:12;204:70;293:5;14:290;-1:-1:-1;;;14:290:177:o;:::-;170:7002:48;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561001057600080fd5b50600436106101005760003560e01c80639cb7de4b11610097578063bbd9718711610066578063bbd9718714610271578063cfad57a214610284578063f3238cec14610297578063fbfa77cf146102aa57600080fd5b80639cb7de4b146101f95780639cdeb5931461020c578063a83b75fd14610234578063b364accb1461024757600080fd5b806346ea87af116100d357806346ea87af146101865780635886b711146101b957806362749803146101cc5780639a11178f146101ec57600080fd5b80630147fb0c14610105578063122e7b071461013857806312d43a51146101465780633d30cabf14610171575b600080fd5b610125610113366004610c23565b60036020526000908152604090205481565b6040519081526020015b60405180910390f35b6101256001600160ff1b0381565b600054610159906001600160a01b031681565b6040516001600160a01b03909116815260200161012f565b61018461017f366004610c4d565b6102bd565b005b6101a9610194366004610c8d565b60026020526000908152604090205460ff1681565b604051901515815260200161012f565b6101256101c7366004610ca8565b610303565b6101256101da366004610c8d565b60046020526000908152604090205481565b6005546101a99060ff1681565b610184610207366004610ce3565b61035b565b61021f61021a366004610d1a565b610406565b6040805192835260208301919091520161012f565b610125610242366004610d84565b61055e565b61025a610255366004610c8d565b610744565b60408051921515835260208301919091520161012f565b61018461027f366004610e32565b6108a6565b610184610292366004610c8d565b6109b2565b6101846102a5366004610e9e565b610a54565b600154610159906001600160a01b031681565b6000546001600160a01b031633146102f05760405162461bcd60e51b81526004016102e790610f1c565b60405180910390fd5b6005805460ff1916911515919091179055565b600080600061031485898987610b52565b9150915060008261032e576103298288610f61565b610338565b6103388288610f7a565b610342888a610f8d565b61034c9190610fa4565b93505050505b95945050505050565b6000546001600160a01b031633146103855760405162461bcd60e51b81526004016102e790610f1c565b6001600160a01b0382166103db5760405162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20696e76616c6964205f68616e646c65720060448201526064016102e7565b6001600160a01b03919091166000908152600260205260409020805460ff1916911515919091179055565b6000806000610418898989888861055e565b6001600160a01b03881660009081526004602052604081205491925087821161044a576104458289610f7a565b610454565b6104548883610f7a565b60015460405163114f1b5560e31b81526001600160a01b038c8116600483015292935060009283928392911690638a78daa890602401602060405180830381865afa1580156104a7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104cb9190610fc6565b9050886104e1576104dc8a82610f7a565b6104eb565b6104eb8a82610f61565b9250826000036105075760008097509750505050505050610553565b8460000361052057828b97509750505050505050610553565b8461052b8583610f8d565b6105359190610fa4565b9150506000610547858c85858a610303565b92975091955050505050505b965096945050505050565b6000811561056e57506000610352565b600154604051634a3f088d60e01b81526001600160a01b0388811660048301528781166024830152868116604483015260006064830181905292169190819081908490634a3f088d9060840161010060405180830381865afa1580156105d8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105fc9190610fdf565b9750505050509350509250600080856001600160a01b0316635c07eaab8b87876000886040518663ffffffff1660e01b815260040161066a9594939291906001600160a01b039590951685526020850193909352604084019190915215156060830152608082015260a00190565b6040805180830381865afa158015610686573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106aa9190611049565b90925090506000856106bc838c610f8d565b6106c69190610fa4565b90506001600160ff1b03811061071e5760405162461bcd60e51b815260206004820152601760248201527f53686f727473547261636b65723a206f766572666c6f7700000000000000000060448201526064016102e7565b826107315761072c81611077565b610733565b805b9d9c50505050505050505050505050565b60015460405163114f1b5560e31b81526001600160a01b0383811660048301526000928392839290911690638a78daa890602401602060405180830381865afa158015610795573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b99190610fc6565b6001600160a01b0385166000908152600460205260408120549192508290036107e9575060009485945092505050565b600154604051637092736960e11b81526001600160a01b038781166004830152600092169063e124e6d290602401602060405180830381865afa158015610834573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108589190610fc6565b905060008183116108725761086d8383610f7a565b61087c565b61087c8284610f7a565b905060008361088b8387610f8d565b6108959190610fa4565b929093119791965090945050505050565b6000546001600160a01b031633146108d05760405162461bcd60e51b81526004016102e790610f1c565b60055460ff16156109235760405162461bcd60e51b815260206004820152601f60248201527f53686f727473547261636b65723a20616c7265616479206d696772617465640060448201526064016102e7565b60005b8381101561099e5782828281811061094057610940611093565b905060200201356004600087878581811061095d5761095d611093565b90506020020160208101906109729190610c8d565b6001600160a01b0316815260208101919091526040016000205580610996816110a9565b915050610926565b50506005805460ff19166001179055505050565b6000546001600160a01b031633146109dc5760405162461bcd60e51b81526004016102e790610f1c565b6001600160a01b038116610a325760405162461bcd60e51b815260206004820181905260248201527f476f7665726e61626c653a205f676f76206973207a65726f206164647265737360448201526064016102e7565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b3360009081526002602052604090205460ff16610ab35760405162461bcd60e51b815260206004820152601860248201527f53686f727473547261636b65723a20666f7262696464656e000000000000000060448201526064016102e7565b8380610abd575082155b610b495760055460ff1615610b4957600080610add898989878988610406565b91509150610b0287826001600160a01b03909116600090815260046020526040902055565b60408051838152602081018390526001600160a01b038916917fd6137be44db128ffcf1ea1821dbe8f889f67f949be7656c2d8acba2a4a891a02910160405180910390a250505b50505050505050565b6000808385118015610bb5576000841315610b955786841115610b8457610b798785610f7a565b965060009050610bab565b610b8e8488610f7a565b9650610bab565b610b9e84611077565b610ba89088610f61565b96505b9150859050610c1a565b6000841315610bcf57610bc88488610f61565b9650610c14565b86610bd985611077565b1115610bfe5786610be985611077565b610bf39190610f7a565b965060019050610c14565b610c0784611077565b610c119088610f7a565b96505b91508590505b94509492505050565b600060208284031215610c3557600080fd5b5035919050565b8015158114610c4a57600080fd5b50565b600060208284031215610c5f57600080fd5b8135610c6a81610c3c565b9392505050565b80356001600160a01b0381168114610c8857600080fd5b919050565b600060208284031215610c9f57600080fd5b610c6a82610c71565b600080600080600060a08688031215610cc057600080fd5b505083359560208501359550604085013594606081013594506080013592509050565b60008060408385031215610cf657600080fd5b610cff83610c71565b91506020830135610d0f81610c3c565b809150509250929050565b60008060008060008060c08789031215610d3357600080fd5b610d3c87610c71565b9550610d4a60208801610c71565b9450610d5860408801610c71565b9350606087013592506080870135915060a0870135610d7681610c3c565b809150509295509295509295565b600080600080600060a08688031215610d9c57600080fd5b610da586610c71565b9450610db360208701610c71565b9350610dc160408701610c71565b9250606086013591506080860135610dd881610c3c565b809150509295509295909350565b60008083601f840112610df857600080fd5b50813567ffffffffffffffff811115610e1057600080fd5b6020830191508360208260051b8501011115610e2b57600080fd5b9250929050565b60008060008060408587031215610e4857600080fd5b843567ffffffffffffffff80821115610e6057600080fd5b610e6c88838901610de6565b90965094506020870135915080821115610e8557600080fd5b50610e9287828801610de6565b95989497509550505050565b600080600080600080600060e0888a031215610eb957600080fd5b610ec288610c71565b9650610ed060208901610c71565b9550610ede60408901610c71565b94506060880135610eee81610c3c565b93506080880135925060a0880135915060c0880135610f0c81610c3c565b8091505092959891949750929550565b60208082526015908201527423b7bb32b93730b136329d103337b93134b23232b760591b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b80820180821115610f7457610f74610f4b565b92915050565b81810381811115610f7457610f74610f4b565b8082028115828204841417610f7457610f74610f4b565b600082610fc157634e487b7160e01b600052601260045260246000fd5b500490565b600060208284031215610fd857600080fd5b5051919050565b600080600080600080600080610100898b031215610ffc57600080fd5b885197506020890151965060408901519550606089015194506080890151935060a0890151925060c089015161103181610c3c565b8092505060e089015190509295985092959890939650565b6000806040838503121561105c57600080fd5b825161106781610c3c565b6020939093015192949293505050565b6000600160ff1b820161108c5761108c610f4b565b5060000390565b634e487b7160e01b600052603260045260246000fd5b6000600182016110bb576110bb610f4b565b506001019056fea2646970667358221220836abbdd808342f2d2fad6a1d2a3dbf9bab9e03a96d8e652a40553b88266e2d364736f6c63430008120033","sourceMap":"170:7002:48:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;487:39;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;345:25:177;;;333:2;318:18;487:39:48;;;;;;;;345:62;;-1:-1:-1;;;;;345:62:48;;84:18:27;;;;;-1:-1:-1;;;;;84:18:27;;;;;;-1:-1:-1;;;;;727:32:177;;;709:51;;697:2;682:18;84::27;563:203:177;1202:120:48;;;;;;:::i;:::-;;:::i;:::-;;440:41;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;1674:14:177;;1667:22;1649:41;;1637:2;1622:18;440:41:48;1509:187:177;5114:498:48;;;;;;:::i;:::-;;:::i;533:68::-;;;;;;:::i;:::-;;;;;;;;;;;;;;607:43;;;;;;;;;845:195;;;;;;:::i;:::-;;:::i;3046:1201::-;;;;;;:::i;:::-;;:::i;:::-;;;;3260:25:177;;;3316:2;3301:18;;3294:34;;;;3233:18;3046:1201:48;3086:248:177;4253:855:48;;;;;;:::i;:::-;;:::i;2095:570::-;;;;;;:::i;:::-;;:::i;:::-;;;;4250:14:177;;4243:22;4225:41;;4297:2;4282:18;;4275:34;;;;4198:18;2095:570:48;4057:258:177;2671:369:48;;;;;;:::i;:::-;;:::i;266:147:27:-;;;;;;:::i;:::-;;:::i;1328:761:48:-;;;;;;:::i;:::-;;:::i;414:19::-;;;;;-1:-1:-1;;;;;414:19:48;;;1202:120;213:3:27;;-1:-1:-1;;;;;213:3:27;199:10;:17;191:51;;;;-1:-1:-1;;;191:51:27;;;;;;;:::i;:::-;;;;;;;;;1285:22:48::1;:30:::0;;-1:-1:-1;;1285:30:48::1;::::0;::::1;;::::0;;;::::1;::::0;;1202:120::o;5114:498::-;5316:7;5336:14;5352:17;5373:62;5387:6;5395:13;5410:10;5422:12;5373:13;:62::i;:::-;5335:100;;;;5446:24;5513:9;:57;;5549:21;5561:9;5549;:21;:::i;:::-;5513:57;;;5525:21;5537:9;5525;:21;:::i;:::-;5486:22;5499:9;5486:10;:22;:::i;:::-;5485:86;;;;:::i;:::-;5446:125;-1:-1:-1;;;;5114:498:48;;;;;;;;:::o;845:195::-;213:3:27;;-1:-1:-1;;;;;213:3:27;199:10;:17;191:51;;;;-1:-1:-1;;;191:51:27;;;;;;;:::i;:::-;-1:-1:-1;;;;;934:22:48;::::1;926:66;;;::::0;-1:-1:-1;;;926:66:48;;7779:2:177;926:66:48::1;::::0;::::1;7761:21:177::0;7818:2;7798:18;;;7791:30;7857:33;7837:18;;;7830:61;7908:18;;926:66:48::1;7577:355:177::0;926:66:48::1;-1:-1:-1::0;;;;;1002:19:48;;;::::1;;::::0;;;:9:::1;:19;::::0;;;;:31;;-1:-1:-1;;1002:31:48::1;::::0;::::1;;::::0;;;::::1;::::0;;845:195::o;3046:1201::-;3285:7;3294;3313:18;3334:80;3349:8;3359:16;3377:11;3390:10;3402:11;3334:14;:80::i;:::-;-1:-1:-1;;;;;3447:37:48;;3424:20;3447:37;;;:24;:37;;;;;;3313:101;;-1:-1:-1;3515:25:48;;;:83;;3573:25;3586:12;3573:10;:25;:::i;:::-;3515:83;;;3544:25;3559:10;3544:12;:25;:::i;:::-;3718:5;;:35;;-1:-1:-1;;;3718:35:48;;-1:-1:-1;;;;;727:32:177;;;3718:35:48;;;709:51:177;3494:104:48;;-1:-1:-1;3609:16:48;;;;;;3718:5;;;:22;;682:18:177;;3718:35:48;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;3703:50;;3778:11;:51;;3812:17;3819:10;3812:4;:17;:::i;:::-;3778:51;;;3792:17;3799:10;3792:4;:17;:::i;:::-;3767:62;;3848:8;3860:1;3848:13;3844:65;;3889:1;3892;3881:13;;;;;;;;;;;;3844:65;3927:12;3943:1;3927:17;3923:85;;3972:8;3982:10;3964:29;;;;;;;;;;;;3923:85;4052:12;4031:17;4038:10;4031:4;:17;:::i;:::-;4030:34;;;;:::i;:::-;4022:42;;3689:386;4085:24;4112:82;4139:12;4153:10;4165:8;4175:5;4182:11;4112:26;:82::i;:::-;4213:8;;-1:-1:-1;4085:109:48;;-1:-1:-1;;;;;;3046:1201:48;;;;;;;;;;:::o;4253:855::-;4447:6;4469:11;4465:50;;;-1:-1:-1;4503:1:48;4496:8;;4465:50;4541:5;;4662:66;;-1:-1:-1;;;4662:66:48;;-1:-1:-1;;;;;8407:15:177;;;4662:66:48;;;8389:34:177;8459:15;;;8439:18;;;8432:43;8511:15;;;8491:18;;;8484:43;4525:13:48;8543:18:177;;;8536:50;;;4541:5:48;;;4525:13;;;;;4541:5;;4662:18;;8323:19:177;;4662:66:48;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4556:172;;;;;;;;;;;4740:14;4756:13;4773:6;-1:-1:-1;;;;;4773:15:48;;4789:11;4802:4;4808:12;4822:5;4829:17;4773:74;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;9550:32:177;;;;9532:51;;9614:2;9599:18;;9592:34;;;;9657:2;9642:18;;9635:34;;;;9712:14;9705:22;9700:2;9685:18;;9678:50;9759:3;9744:19;;9737:35;9519:3;9504:19;;9279:499;4773:74:48;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4739:108;;-1:-1:-1;4739:108:48;-1:-1:-1;4903:21:48;4950:4;4928:18;4739:108;4928:10;:18;:::i;:::-;4927:27;;;;:::i;:::-;4903:51;;-1:-1:-1;;;;;4972:13:48;:26;4964:62;;;;-1:-1:-1;;;4964:62:48;;10296:2:177;4964:62:48;;;10278:21:177;10335:2;10315:18;;;10308:30;10374:25;10354:18;;;10347:53;10417:18;;4964:62:48;10094:347:177;4964:62:48;5043:9;:58;;5079:22;5087:13;5079:22;:::i;:::-;5043:58;;;5062:13;5043:58;5036:65;4253:855;-1:-1:-1;;;;;;;;;;;;;4253:855:48:o;2095:570::-;2201:5;;:30;;-1:-1:-1;;;2201:30:48;;-1:-1:-1;;;;;727:32:177;;;2201:30:48;;;709:51:177;2161:4:48;;;;;;2201:5;;;;:22;;682:18:177;;2201:30:48;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;;;;;2264:32:48;;2241:20;2264:32;;;:24;:32;;;;;;2186:45;;-1:-1:-1;2310:9:48;;;2306:32;;-1:-1:-1;2329:5:48;;;;-1:-1:-1;2095:570:48;-1:-1:-1;;;2095:570:48:o;2306:32::-;2376:5;;2369:33;;-1:-1:-1;;;2369:33:48;;-1:-1:-1;;;;;727:32:177;;;2369:33:48;;;709:51:177;2349:17:48;;2376:5;;2369:25;;682:18:177;;2369:33:48;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;2349:53;;2412:18;2448:9;2433:12;:24;:78;;2487:24;2499:12;2487:9;:24;:::i;:::-;2433:78;;;2460:24;2475:9;2460:12;:24;:::i;:::-;2412:99;-1:-1:-1;2521:13:48;2559:12;2538:17;2412:99;2538:4;:17;:::i;:::-;2537:34;;;;:::i;:::-;2598:24;;;;;2521:50;;-1:-1:-1;2095:570:48;;-1:-1:-1;;;;;2095:570:48:o;2671:369::-;213:3:27;;-1:-1:-1;;;;;213:3:27;199:10;:17;191:51;;;;-1:-1:-1;;;191:51:27;;;;;;;:::i;:::-;2800:22:48::1;::::0;::::1;;2799:23;2791:67;;;::::0;-1:-1:-1;;;2791:67:48;;10789:2:177;2791:67:48::1;::::0;::::1;10771:21:177::0;10828:2;10808:18;;;10801:30;10867:33;10847:18;;;10840:61;10918:18;;2791:67:48::1;10587:355:177::0;2791:67:48::1;2874:9;2869:126;2889:18:::0;;::::1;2869:126;;;2967:14;;2982:1;2967:17;;;;;;;:::i;:::-;;;;;;;2928:24;:36;2953:7;;2961:1;2953:10;;;;;;;:::i;:::-;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1::0;;;;;2928:36:48::1;::::0;;::::1;::::0;::::1;::::0;;;;;;-1:-1:-1;2928:36:48;:56;2909:3;::::1;::::0;::::1;:::i;:::-;;;;2869:126;;;-1:-1:-1::0;;3004:22:48::1;:29:::0;;-1:-1:-1;;3004:29:48::1;3029:4;3004:29;::::0;;-1:-1:-1;;;2671:369:48:o;266:147:27:-;213:3;;-1:-1:-1;;;;;213:3:27;199:10;:17;191:51;;;;-1:-1:-1;;;191:51:27;;;;;;;:::i;:::-;-1:-1:-1;;;;;331:18:27;::::1;323:63;;;::::0;-1:-1:-1;;;323:63:27;;11421:2:177;323:63:27::1;::::0;::::1;11403:21:177::0;;;11440:18;;;11433:30;11499:34;11479:18;;;11472:62;11551:18;;323:63:27::1;11219:356:177::0;323:63:27::1;396:3;:10:::0;;-1:-1:-1;;;;;;396:10:27::1;-1:-1:-1::0;;;;;396:10:27;;;::::1;::::0;;;::::1;::::0;;266:147::o;1328:761:48:-;708:10;698:21;;;;:9;:21;;;;;;;;690:58;;;;-1:-1:-1;;;690:58:48;;11782:2:177;690:58:48;;;11764:21:177;11821:2;11801:18;;;11794:30;11860:26;11840:18;;;11833:54;11904:18;;690:58:48;11580:348:177;690:58:48;1602:7:::1;:26;;;-1:-1:-1::0;1613:15:48;;1602:26:::1;1644:7;1598:63;1676:22;::::0;::::1;;1671:60:::0;1714:7:::1;1671:60;1742:23;1767:31:::0;1814:100:::1;1837:8;1847:16;1865:11;1878:10;1890;1902:11;1814:22;:100::i;:::-;1741:173;;;;1924:65;1952:11;1965:23;-1:-1:-1::0;;;;;1141:32:48;;;;;;;:24;:32;;;;;:48;1046:150;1924:65:::1;2005:77;::::0;;3260:25:177;;;3316:2;3301:18;;3294:34;;;-1:-1:-1;;;;;2005:77:48;::::1;::::0;::::1;::::0;3233:18:177;2005:77:48::1;;;;;;;1588:501;;758:1;1328:761:::0;;;;;;;:::o;5618:1552::-;5768:4;;6244:26;;;6280:499;;;;6373:1;6358:12;:16;6354:374;;;6422:6;6406:12;6398:30;6394:241;;;6461:30;6485:6;6469:12;6461:30;:::i;:::-;6452:39;;6525:5;6513:17;;6354:374;;6394:241;6586:30;6603:12;6586:6;:30;:::i;:::-;6577:39;;6354:374;;;6699:13;6700:12;6699:13;:::i;:::-;6682:31;;:6;:31;:::i;:::-;6673:40;;6354:374;6750:9;-1:-1:-1;6761:6:48;;-1:-1:-1;6742:26:48;;6280:499;6808:1;6793:12;:16;6789:339;;;6834:30;6851:12;6834:6;:30;:::i;:::-;6825:39;;6789:339;;;6924:6;6907:13;6908:12;6907:13;:::i;:::-;6899:31;6895:223;;;6984:6;6967:13;6968:12;6967:13;:::i;:::-;6959:31;;;;:::i;:::-;6950:40;;7020:4;7008:16;;6895:223;;;7089:13;7090:12;7089:13;:::i;:::-;7072:31;;:6;:31;:::i;:::-;7063:40;;6895:223;7145:9;-1:-1:-1;7156:6:48;;-1:-1:-1;5618:1552:48;;;;;;;;:::o;14:180:177:-;73:6;126:2;114:9;105:7;101:23;97:32;94:52;;;142:1;139;132:12;94:52;-1:-1:-1;165:23:177;;14:180;-1:-1:-1;14:180:177:o;771:118::-;857:5;850:13;843:21;836:5;833:32;823:60;;879:1;876;869:12;823:60;771:118;:::o;894:241::-;950:6;1003:2;991:9;982:7;978:23;974:32;971:52;;;1019:1;1016;1009:12;971:52;1058:9;1045:23;1077:28;1099:5;1077:28;:::i;:::-;1124:5;894:241;-1:-1:-1;;;894:241:177:o;1140:173::-;1208:20;;-1:-1:-1;;;;;1257:31:177;;1247:42;;1237:70;;1303:1;1300;1293:12;1237:70;1140:173;;;:::o;1318:186::-;1377:6;1430:2;1418:9;1409:7;1405:23;1401:32;1398:52;;;1446:1;1443;1436:12;1398:52;1469:29;1488:9;1469:29;:::i;1701:453::-;1795:6;1803;1811;1819;1827;1880:3;1868:9;1859:7;1855:23;1851:33;1848:53;;;1897:1;1894;1887:12;1848:53;-1:-1:-1;;1920:23:177;;;1990:2;1975:18;;1962:32;;-1:-1:-1;2041:2:177;2026:18;;2013:32;;2092:2;2077:18;;2064:32;;-1:-1:-1;2143:3:177;2128:19;2115:33;;-1:-1:-1;1701:453:177;-1:-1:-1;1701:453:177:o;2159:315::-;2224:6;2232;2285:2;2273:9;2264:7;2260:23;2256:32;2253:52;;;2301:1;2298;2291:12;2253:52;2324:29;2343:9;2324:29;:::i;:::-;2314:39;;2403:2;2392:9;2388:18;2375:32;2416:28;2438:5;2416:28;:::i;:::-;2463:5;2453:15;;;2159:315;;;;;:::o;2479:602::-;2580:6;2588;2596;2604;2612;2620;2673:3;2661:9;2652:7;2648:23;2644:33;2641:53;;;2690:1;2687;2680:12;2641:53;2713:29;2732:9;2713:29;:::i;:::-;2703:39;;2761:38;2795:2;2784:9;2780:18;2761:38;:::i;:::-;2751:48;;2818:38;2852:2;2841:9;2837:18;2818:38;:::i;:::-;2808:48;;2903:2;2892:9;2888:18;2875:32;2865:42;;2954:3;2943:9;2939:19;2926:33;2916:43;;3009:3;2998:9;2994:19;2981:33;3023:28;3045:5;3023:28;:::i;:::-;3070:5;3060:15;;;2479:602;;;;;;;;:::o;3339:533::-;3431:6;3439;3447;3455;3463;3516:3;3504:9;3495:7;3491:23;3487:33;3484:53;;;3533:1;3530;3523:12;3484:53;3556:29;3575:9;3556:29;:::i;:::-;3546:39;;3604:38;3638:2;3627:9;3623:18;3604:38;:::i;:::-;3594:48;;3661:38;3695:2;3684:9;3680:18;3661:38;:::i;:::-;3651:48;;3746:2;3735:9;3731:18;3718:32;3708:42;;3800:3;3789:9;3785:19;3772:33;3814:28;3836:5;3814:28;:::i;:::-;3861:5;3851:15;;;3339:533;;;;;;;;:::o;4320:367::-;4383:8;4393:6;4447:3;4440:4;4432:6;4428:17;4424:27;4414:55;;4465:1;4462;4455:12;4414:55;-1:-1:-1;4488:20:177;;4531:18;4520:30;;4517:50;;;4563:1;4560;4553:12;4517:50;4600:4;4592:6;4588:17;4576:29;;4660:3;4653:4;4643:6;4640:1;4636:14;4628:6;4624:27;4620:38;4617:47;4614:67;;;4677:1;4674;4667:12;4614:67;4320:367;;;;;:::o;4692:773::-;4814:6;4822;4830;4838;4891:2;4879:9;4870:7;4866:23;4862:32;4859:52;;;4907:1;4904;4897:12;4859:52;4947:9;4934:23;4976:18;5017:2;5009:6;5006:14;5003:34;;;5033:1;5030;5023:12;5003:34;5072:70;5134:7;5125:6;5114:9;5110:22;5072:70;:::i;:::-;5161:8;;-1:-1:-1;5046:96:177;-1:-1:-1;5249:2:177;5234:18;;5221:32;;-1:-1:-1;5265:16:177;;;5262:36;;;5294:1;5291;5284:12;5262:36;;5333:72;5397:7;5386:8;5375:9;5371:24;5333:72;:::i;:::-;4692:773;;;;-1:-1:-1;5424:8:177;-1:-1:-1;;;;4692:773:177:o;5470:738::-;5577:6;5585;5593;5601;5609;5617;5625;5678:3;5666:9;5657:7;5653:23;5649:33;5646:53;;;5695:1;5692;5685:12;5646:53;5718:29;5737:9;5718:29;:::i;:::-;5708:39;;5766:38;5800:2;5789:9;5785:18;5766:38;:::i;:::-;5756:48;;5823:38;5857:2;5846:9;5842:18;5823:38;:::i;:::-;5813:48;;5911:2;5900:9;5896:18;5883:32;5924:28;5946:5;5924:28;:::i;:::-;5971:5;-1:-1:-1;6023:3:177;6008:19;;5995:33;;-1:-1:-1;6075:3:177;6060:19;;6047:33;;-1:-1:-1;6132:3:177;6117:19;;6104:33;6146:30;6104:33;6146:30;:::i;:::-;6195:7;6185:17;;;5470:738;;;;;;;;;;:::o;6437:345::-;6639:2;6621:21;;;6678:2;6658:18;;;6651:30;-1:-1:-1;;;6712:2:177;6697:18;;6690:51;6773:2;6758:18;;6437:345::o;6787:127::-;6848:10;6843:3;6839:20;6836:1;6829:31;6879:4;6876:1;6869:15;6903:4;6900:1;6893:15;6919:125;6984:9;;;7005:10;;;7002:36;;;7018:18;;:::i;:::-;6919:125;;;;:::o;7049:128::-;7116:9;;;7137:11;;;7134:37;;;7151:18;;:::i;7182:168::-;7255:9;;;7286;;7303:15;;;7297:22;;7283:37;7273:71;;7324:18;;:::i;7355:217::-;7395:1;7421;7411:132;;7465:10;7460:3;7456:20;7453:1;7446:31;7500:4;7497:1;7490:15;7528:4;7525:1;7518:15;7411:132;-1:-1:-1;7557:9:177;;7355:217::o;7937:184::-;8007:6;8060:2;8048:9;8039:7;8035:23;8031:32;8028:52;;;8076:1;8073;8066:12;8028:52;-1:-1:-1;8099:16:177;;7937:184;-1:-1:-1;7937:184:177:o;8597:677::-;8727:6;8735;8743;8751;8759;8767;8775;8783;8836:3;8824:9;8815:7;8811:23;8807:33;8804:53;;;8853:1;8850;8843:12;8804:53;8882:9;8876:16;8866:26;;8932:2;8921:9;8917:18;8911:25;8901:35;;8976:2;8965:9;8961:18;8955:25;8945:35;;9020:2;9009:9;9005:18;8999:25;8989:35;;9064:3;9053:9;9049:19;9043:26;9033:36;;9109:3;9098:9;9094:19;9088:26;9078:36;;9157:3;9146:9;9142:19;9136:26;9171:28;9193:5;9171:28;:::i;:::-;9218:5;9208:15;;;9263:3;9252:9;9248:19;9242:26;9232:36;;8597:677;;;;;;;;;;;:::o;9783:306::-;9859:6;9867;9920:2;9908:9;9899:7;9895:23;9891:32;9888:52;;;9936:1;9933;9926:12;9888:52;9968:9;9962:16;9987:28;10009:5;9987:28;:::i;:::-;10079:2;10064:18;;;;10058:25;10034:5;;10058:25;;-1:-1:-1;;;9783:306:177:o;10446:136::-;10481:3;-1:-1:-1;;;10502:22:177;;10499:48;;10527:18;;:::i;:::-;-1:-1:-1;10567:1:177;10563:13;;10446:136::o;10947:127::-;11008:10;11003:3;10999:20;10996:1;10989:31;11039:4;11036:1;11029:15;11063:4;11060:1;11053:15;11079:135;11118:3;11139:17;;;11136:43;;11159:18;;:::i;:::-;-1:-1:-1;11206:1:177;11195:13;;11079:135::o","linkReferences":{}},"methodIdentifiers":{"MAX_INT256()":"122e7b07","_getNextGlobalAveragePrice(uint256,uint256,uint256,uint256,int256)":"5886b711","data(bytes32)":"0147fb0c","getGlobalShortDelta(address)":"b364accb","getNextGlobalShortData(address,address,address,uint256,uint256,bool)":"9cdeb593","getRealisedPnl(address,address,address,uint256,bool)":"a83b75fd","globalShortAveragePrices(address)":"62749803","gov()":"12d43a51","isGlobalShortDataReady()":"9a11178f","isHandler(address)":"46ea87af","setGov(address)":"cfad57a2","setHandler(address,bool)":"9cb7de4b","setInitData(address[],uint256[])":"bbd97187","setIsGlobalShortDataReady(bool)":"3d30cabf","updateGlobalShortData(address,address,address,bool,uint256,uint256,bool)":"f3238cec","vault()":"fbfa77cf"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.18+commit.87f61d96\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_vault\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"globalShortSize\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"globalShortAveragePrice\",\"type\":\"uint256\"}],\"name\":\"GlobalShortDataUpdated\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"MAX_INT256\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_averagePrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_nextPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_nextSize\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_delta\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"_realisedPnl\",\"type\":\"int256\"}],\"name\":\"_getNextGlobalAveragePrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"data\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"}],\"name\":\"getGlobalShortDelta\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_indexToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_nextPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_sizeDelta\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_isIncrease\",\"type\":\"bool\"}],\"name\":\"getNextGlobalShortData\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_indexToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_sizeDelta\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_isIncrease\",\"type\":\"bool\"}],\"name\":\"getRealisedPnl\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"globalShortAveragePrices\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"gov\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"isGlobalShortDataReady\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"isHandler\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_gov\",\"type\":\"address\"}],\"name\":\"setGov\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_handler\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_isActive\",\"type\":\"bool\"}],\"name\":\"setHandler\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"_tokens\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"_averagePrices\",\"type\":\"uint256[]\"}],\"name\":\"setInitData\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bool\",\"name\":\"value\",\"type\":\"bool\"}],\"name\":\"setIsGlobalShortDataReady\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_indexToken\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_isLong\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"_sizeDelta\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_markPrice\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_isIncrease\",\"type\":\"bool\"}],\"name\":\"updateGlobalShortData\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"vault\",\"outputs\":[{\"internalType\":\"contract IVault\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/core/ShortsTracker.sol\":\"ShortsTracker\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@chainlink/contracts/=lib/chainlink/contracts/src/v0.6/\",\":chainlink/=lib/chainlink/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/chainlink/contracts/foundry-lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"src/access/Governable.sol\":{\"keccak256\":\"0xd8de41a8d8f0c08fb8c13adf4928dde9fc744a38ed23c316ac425212ca5b50a1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b9fe073e34b15f9878ff4a82ea93b24007448f5e8e03c6d3941d9058f5523815\",\"dweb:/ipfs/QmRz43VRZTSURZV5VvWBbN8Vb2UFiYYKrDQAmMuRxcfJod\"]},\"src/core/ShortsTracker.sol\":{\"keccak256\":\"0xf68648509fd0b15e6da586cd78748a465f55198674ada485571f23a0dbf35d50\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://577de240a17a2409d3e10de4a23a98bdd8cb05aa114e3cd6120a27c5ba50f918\",\"dweb:/ipfs/QmbZtS2MWNQKAvTRCEZMEZH6LVTPNxv4XsbRqTnftg5du1\"]},\"src/core/interfaces/IShortsTracker.sol\":{\"keccak256\":\"0xb1b1c323a59f9ac2a6448f564572deaa2f441ca888e143967e274d902aa36112\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9124a74eb003c67d1a8d4942219c223506d337723dc26be9d1a1750e46165ef5\",\"dweb:/ipfs/QmPDjtLUW2jD3KQs1ZzeS2htbP4ctBV6Av8chnrGfxQbp4\"]},\"src/core/interfaces/IVault.sol\":{\"keccak256\":\"0x4cc6e3b5127cd810d4dc6ed39d0ec008c26bfb50faf64170e33ef3191d536453\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://db108675081277cac7202c323b5b68d9c03bce71ef99dae235bf5c9205ed4208\",\"dweb:/ipfs/QmehnayL8EVXSwZpwb2BvxryWhZozT6JiNExmZ9NH7boyC\"]},\"src/core/interfaces/IVaultUtils.sol\":{\"keccak256\":\"0x201178e34624c41dc5563165a9ffebc494f29a7d216e8deb4377396be07494bd\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://d0cde3d9c826f4bca12b57e6c5970527fb2f2d0790f560a51de2e39faa4821a3\",\"dweb:/ipfs/QmZCZUPwM9XQXPm8G9kmhTszEEA98wXRCtCtEGKcwqvimF\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.18+commit.87f61d96"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_vault","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"token","type":"address","indexed":true},{"internalType":"uint256","name":"globalShortSize","type":"uint256","indexed":false},{"internalType":"uint256","name":"globalShortAveragePrice","type":"uint256","indexed":false}],"type":"event","name":"GlobalShortDataUpdated","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"MAX_INT256","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"_averagePrice","type":"uint256"},{"internalType":"uint256","name":"_nextPrice","type":"uint256"},{"internalType":"uint256","name":"_nextSize","type":"uint256"},{"internalType":"uint256","name":"_delta","type":"uint256"},{"internalType":"int256","name":"_realisedPnl","type":"int256"}],"stateMutability":"pure","type":"function","name":"_getNextGlobalAveragePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function","name":"data","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]},{"inputs":[{"internalType":"address","name":"_token","type":"address"}],"stateMutability":"view","type":"function","name":"getGlobalShortDelta","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"uint256","name":"_nextPrice","type":"uint256"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"stateMutability":"view","type":"function","name":"getNextGlobalShortData","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"stateMutability":"view","type":"function","name":"getRealisedPnl","outputs":[{"internalType":"int256","name":"","type":"int256"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"globalShortAveragePrices","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"gov","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"isGlobalShortDataReady","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","name":"isHandler","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"_gov","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setGov"},{"inputs":[{"internalType":"address","name":"_handler","type":"address"},{"internalType":"bool","name":"_isActive","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setHandler"},{"inputs":[{"internalType":"address[]","name":"_tokens","type":"address[]"},{"internalType":"uint256[]","name":"_averagePrices","type":"uint256[]"}],"stateMutability":"nonpayable","type":"function","name":"setInitData"},{"inputs":[{"internalType":"bool","name":"value","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"setIsGlobalShortDataReady"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"address","name":"_collateralToken","type":"address"},{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"bool","name":"_isLong","type":"bool"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_markPrice","type":"uint256"},{"internalType":"bool","name":"_isIncrease","type":"bool"}],"stateMutability":"nonpayable","type":"function","name":"updateGlobalShortData"},{"inputs":[],"stateMutability":"view","type":"function","name":"vault","outputs":[{"internalType":"contract IVault","name":"","type":"address"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@chainlink/contracts/=lib/chainlink/contracts/src/v0.6/","chainlink/=lib/chainlink/","ds-test/=lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/chainlink/contracts/foundry-lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/core/ShortsTracker.sol":"ShortsTracker"},"libraries":{}},"sources":{"src/access/Governable.sol":{"keccak256":"0xd8de41a8d8f0c08fb8c13adf4928dde9fc744a38ed23c316ac425212ca5b50a1","urls":["bzz-raw://b9fe073e34b15f9878ff4a82ea93b24007448f5e8e03c6d3941d9058f5523815","dweb:/ipfs/QmRz43VRZTSURZV5VvWBbN8Vb2UFiYYKrDQAmMuRxcfJod"],"license":"MIT"},"src/core/ShortsTracker.sol":{"keccak256":"0xf68648509fd0b15e6da586cd78748a465f55198674ada485571f23a0dbf35d50","urls":["bzz-raw://577de240a17a2409d3e10de4a23a98bdd8cb05aa114e3cd6120a27c5ba50f918","dweb:/ipfs/QmbZtS2MWNQKAvTRCEZMEZH6LVTPNxv4XsbRqTnftg5du1"],"license":"MIT"},"src/core/interfaces/IShortsTracker.sol":{"keccak256":"0xb1b1c323a59f9ac2a6448f564572deaa2f441ca888e143967e274d902aa36112","urls":["bzz-raw://9124a74eb003c67d1a8d4942219c223506d337723dc26be9d1a1750e46165ef5","dweb:/ipfs/QmPDjtLUW2jD3KQs1ZzeS2htbP4ctBV6Av8chnrGfxQbp4"],"license":"MIT"},"src/core/interfaces/IVault.sol":{"keccak256":"0x4cc6e3b5127cd810d4dc6ed39d0ec008c26bfb50faf64170e33ef3191d536453","urls":["bzz-raw://db108675081277cac7202c323b5b68d9c03bce71ef99dae235bf5c9205ed4208","dweb:/ipfs/QmehnayL8EVXSwZpwb2BvxryWhZozT6JiNExmZ9NH7boyC"],"license":"MIT"},"src/core/interfaces/IVaultUtils.sol":{"keccak256":"0x201178e34624c41dc5563165a9ffebc494f29a7d216e8deb4377396be07494bd","urls":["bzz-raw://d0cde3d9c826f4bca12b57e6c5970527fb2f2d0790f560a51de2e39faa4821a3","dweb:/ipfs/QmZCZUPwM9XQXPm8G9kmhTszEEA98wXRCtCtEGKcwqvimF"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"src/core/ShortsTracker.sol","id":44542,"exportedSymbols":{"Governable":[32410],"IShortsTracker":[52008],"IVault":[52650],"IVaultUtils":[52916],"ShortsTracker":[44541]},"nodeType":"SourceUnit","src":"33:7140:48","nodes":[{"id":43870,"nodeType":"PragmaDirective","src":"33:23:48","nodes":[],"literals":["solidity","0.8",".18"]},{"id":43871,"nodeType":"ImportDirective","src":"58:34:48","nodes":[],"absolutePath":"src/access/Governable.sol","file":"../access/Governable.sol","nameLocation":"-1:-1:-1","scope":44542,"sourceUnit":32411,"symbolAliases":[],"unitAlias":""},{"id":43872,"nodeType":"ImportDirective","src":"93:41:48","nodes":[],"absolutePath":"src/core/interfaces/IShortsTracker.sol","file":"./interfaces/IShortsTracker.sol","nameLocation":"-1:-1:-1","scope":44542,"sourceUnit":52009,"symbolAliases":[],"unitAlias":""},{"id":43873,"nodeType":"ImportDirective","src":"135:33:48","nodes":[],"absolutePath":"src/core/interfaces/IVault.sol","file":"./interfaces/IVault.sol","nameLocation":"-1:-1:-1","scope":44542,"sourceUnit":52651,"symbolAliases":[],"unitAlias":""},{"id":44541,"nodeType":"ContractDefinition","src":"170:7002:48","nodes":[{"id":43885,"nodeType":"EventDefinition","src":"229:110:48","nodes":[],"anonymous":false,"eventSelector":"d6137be44db128ffcf1ea1821dbe8f889f67f949be7656c2d8acba2a4a891a02","name":"GlobalShortDataUpdated","nameLocation":"235:22:48","parameters":{"id":43884,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43879,"indexed":true,"mutability":"mutable","name":"token","nameLocation":"274:5:48","nodeType":"VariableDeclaration","scope":43885,"src":"258:21:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43878,"name":"address","nodeType":"ElementaryTypeName","src":"258:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43881,"indexed":false,"mutability":"mutable","name":"globalShortSize","nameLocation":"289:15:48","nodeType":"VariableDeclaration","scope":43885,"src":"281:23:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43880,"name":"uint256","nodeType":"ElementaryTypeName","src":"281:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":43883,"indexed":false,"mutability":"mutable","name":"globalShortAveragePrice","nameLocation":"314:23:48","nodeType":"VariableDeclaration","scope":43885,"src":"306:31:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43882,"name":"uint256","nodeType":"ElementaryTypeName","src":"306:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"257:81:48"}},{"id":43895,"nodeType":"VariableDeclaration","src":"345:62:48","nodes":[],"constant":true,"functionSelector":"122e7b07","mutability":"constant","name":"MAX_INT256","nameLocation":"369:10:48","scope":44541,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43886,"name":"uint256","nodeType":"ElementaryTypeName","src":"345:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"arguments":[{"expression":{"arguments":[{"id":43891,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"395:6:48","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":43890,"name":"int256","nodeType":"ElementaryTypeName","src":"395:6:48","typeDescriptions":{}}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"}],"id":43889,"name":"type","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-27,"src":"390:4:48","typeDescriptions":{"typeIdentifier":"t_function_metatype_pure$__$returns$__$","typeString":"function () pure"}},"id":43892,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"390:12:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_magic_meta_type_t_int256","typeString":"type(int256)"}},"id":43893,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"403:3:48","memberName":"max","nodeType":"MemberAccess","src":"390:16:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":43888,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"382:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":43887,"name":"uint256","nodeType":"ElementaryTypeName","src":"382:7:48","typeDescriptions":{}}},"id":43894,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"382:25:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":43898,"nodeType":"VariableDeclaration","src":"414:19:48","nodes":[],"constant":false,"functionSelector":"fbfa77cf","mutability":"mutable","name":"vault","nameLocation":"428:5:48","scope":44541,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"},"typeName":{"id":43897,"nodeType":"UserDefinedTypeName","pathNode":{"id":43896,"name":"IVault","nameLocations":["414:6:48"],"nodeType":"IdentifierPath","referencedDeclaration":52650,"src":"414:6:48"},"referencedDeclaration":52650,"src":"414:6:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"visibility":"public"},{"id":43902,"nodeType":"VariableDeclaration","src":"440:41:48","nodes":[],"constant":false,"functionSelector":"46ea87af","mutability":"mutable","name":"isHandler","nameLocation":"472:9:48","scope":44541,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"typeName":{"id":43901,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":43899,"name":"address","nodeType":"ElementaryTypeName","src":"448:7:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"440:24:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":43900,"name":"bool","nodeType":"ElementaryTypeName","src":"459:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}},"visibility":"public"},{"id":43906,"nodeType":"VariableDeclaration","src":"487:39:48","nodes":[],"constant":false,"functionSelector":"0147fb0c","mutability":"mutable","name":"data","nameLocation":"522:4:48","scope":44541,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bytes32_$","typeString":"mapping(bytes32 => bytes32)"},"typeName":{"id":43905,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":43903,"name":"bytes32","nodeType":"ElementaryTypeName","src":"495:7:48","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Mapping","src":"487:27:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bytes32_$","typeString":"mapping(bytes32 => bytes32)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":43904,"name":"bytes32","nodeType":"ElementaryTypeName","src":"506:7:48","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},"visibility":"public"},{"id":43911,"nodeType":"VariableDeclaration","src":"533:68:48","nodes":[],"baseFunctions":[51950],"constant":false,"functionSelector":"62749803","mutability":"mutable","name":"globalShortAveragePrices","nameLocation":"577:24:48","overrides":{"id":43910,"nodeType":"OverrideSpecifier","overrides":[],"src":"568:8:48"},"scope":44541,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"},"typeName":{"id":43909,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":43907,"name":"address","nodeType":"ElementaryTypeName","src":"541:7:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"533:27:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":43908,"name":"uint256","nodeType":"ElementaryTypeName","src":"552:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},"visibility":"public"},{"id":43914,"nodeType":"VariableDeclaration","src":"607:43:48","nodes":[],"baseFunctions":[51943],"constant":false,"functionSelector":"9a11178f","mutability":"mutable","name":"isGlobalShortDataReady","nameLocation":"628:22:48","overrides":{"id":43913,"nodeType":"OverrideSpecifier","overrides":[],"src":"619:8:48"},"scope":44541,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":43912,"name":"bool","nodeType":"ElementaryTypeName","src":"607:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"public"},{"id":43926,"nodeType":"ModifierDefinition","src":"657:109:48","nodes":[],"body":{"id":43925,"nodeType":"Block","src":"680:86:48","nodes":[],"statements":[{"expression":{"arguments":[{"baseExpression":{"id":43917,"name":"isHandler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43902,"src":"698:9:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":43920,"indexExpression":{"expression":{"id":43918,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"708:3:48","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":43919,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"712:6:48","memberName":"sender","nodeType":"MemberAccess","src":"708:10:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"698:21:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"53686f727473547261636b65723a20666f7262696464656e","id":43921,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"721:26:48","typeDescriptions":{"typeIdentifier":"t_stringliteral_7841260a376f5abeafe75eea1182f8babe69f41587d009b45687048fd0516c7b","typeString":"literal_string \"ShortsTracker: forbidden\""},"value":"ShortsTracker: forbidden"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_7841260a376f5abeafe75eea1182f8babe69f41587d009b45687048fd0516c7b","typeString":"literal_string \"ShortsTracker: forbidden\""}],"id":43916,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"690:7:48","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":43922,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"690:58:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43923,"nodeType":"ExpressionStatement","src":"690:58:48"},{"id":43924,"nodeType":"PlaceholderStatement","src":"758:1:48"}]},"name":"onlyHandler","nameLocation":"666:11:48","parameters":{"id":43915,"nodeType":"ParameterList","parameters":[],"src":"677:2:48"},"virtual":false,"visibility":"internal"},{"id":43938,"nodeType":"FunctionDefinition","src":"772:67:48","nodes":[],"body":{"id":43937,"nodeType":"Block","src":"800:39:48","nodes":[],"statements":[{"expression":{"id":43935,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43931,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43898,"src":"810:5:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":43933,"name":"_vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43928,"src":"825:6:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":43932,"name":"IVault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52650,"src":"818:6:48","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IVault_$52650_$","typeString":"type(contract IVault)"}},"id":43934,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"818:14:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"src":"810:22:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"id":43936,"nodeType":"ExpressionStatement","src":"810:22:48"}]},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":43929,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43928,"mutability":"mutable","name":"_vault","nameLocation":"792:6:48","nodeType":"VariableDeclaration","scope":43938,"src":"784:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43927,"name":"address","nodeType":"ElementaryTypeName","src":"784:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"783:16:48"},"returnParameters":{"id":43930,"nodeType":"ParameterList","parameters":[],"src":"800:0:48"},"scope":44541,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":43964,"nodeType":"FunctionDefinition","src":"845:195:48","nodes":[],"body":{"id":43963,"nodeType":"Block","src":"916:124:48","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":43953,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":43948,"name":"_handler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43940,"src":"934:8:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":43951,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"954:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":43950,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"946:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":43949,"name":"address","nodeType":"ElementaryTypeName","src":"946:7:48","typeDescriptions":{}}},"id":43952,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"946:10:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"934:22:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"53686f727473547261636b65723a20696e76616c6964205f68616e646c6572","id":43954,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"958:33:48","typeDescriptions":{"typeIdentifier":"t_stringliteral_17919eb097482d24b61aeae25aa89ecb89790fee6507ccc2d060b9f43de60e2f","typeString":"literal_string \"ShortsTracker: invalid _handler\""},"value":"ShortsTracker: invalid _handler"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_17919eb097482d24b61aeae25aa89ecb89790fee6507ccc2d060b9f43de60e2f","typeString":"literal_string \"ShortsTracker: invalid _handler\""}],"id":43947,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"926:7:48","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":43955,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"926:66:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43956,"nodeType":"ExpressionStatement","src":"926:66:48"},{"expression":{"id":43961,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":43957,"name":"isHandler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43902,"src":"1002:9:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_bool_$","typeString":"mapping(address => bool)"}},"id":43959,"indexExpression":{"id":43958,"name":"_handler","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43940,"src":"1012:8:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"1002:19:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":43960,"name":"_isActive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43942,"src":"1024:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1002:31:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":43962,"nodeType":"ExpressionStatement","src":"1002:31:48"}]},"baseFunctions":[52007],"functionSelector":"9cb7de4b","implemented":true,"kind":"function","modifiers":[{"id":43945,"kind":"modifierInvocation","modifierName":{"id":43944,"name":"onlyGov","nameLocations":["908:7:48"],"nodeType":"IdentifierPath","referencedDeclaration":32387,"src":"908:7:48"},"nodeType":"ModifierInvocation","src":"908:7:48"}],"name":"setHandler","nameLocation":"854:10:48","parameters":{"id":43943,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43940,"mutability":"mutable","name":"_handler","nameLocation":"873:8:48","nodeType":"VariableDeclaration","scope":43964,"src":"865:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43939,"name":"address","nodeType":"ElementaryTypeName","src":"865:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43942,"mutability":"mutable","name":"_isActive","nameLocation":"888:9:48","nodeType":"VariableDeclaration","scope":43964,"src":"883:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":43941,"name":"bool","nodeType":"ElementaryTypeName","src":"883:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"864:34:48"},"returnParameters":{"id":43946,"nodeType":"ParameterList","parameters":[],"src":"916:0:48"},"scope":44541,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":43978,"nodeType":"FunctionDefinition","src":"1046:150:48","nodes":[],"body":{"id":43977,"nodeType":"Block","src":"1131:65:48","nodes":[],"statements":[{"expression":{"id":43975,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":43971,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43911,"src":"1141:24:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":43973,"indexExpression":{"id":43972,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43966,"src":"1166:6:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"1141:32:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":43974,"name":"_averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43968,"src":"1176:13:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1141:48:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":43976,"nodeType":"ExpressionStatement","src":"1141:48:48"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_setGlobalShortAveragePrice","nameLocation":"1055:27:48","parameters":{"id":43969,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43966,"mutability":"mutable","name":"_token","nameLocation":"1091:6:48","nodeType":"VariableDeclaration","scope":43978,"src":"1083:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43965,"name":"address","nodeType":"ElementaryTypeName","src":"1083:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43968,"mutability":"mutable","name":"_averagePrice","nameLocation":"1107:13:48","nodeType":"VariableDeclaration","scope":43978,"src":"1099:21:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43967,"name":"uint256","nodeType":"ElementaryTypeName","src":"1099:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1082:39:48"},"returnParameters":{"id":43970,"nodeType":"ParameterList","parameters":[],"src":"1131:0:48"},"scope":44541,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":43991,"nodeType":"FunctionDefinition","src":"1202:120:48","nodes":[],"body":{"id":43990,"nodeType":"Block","src":"1275:47:48","nodes":[],"statements":[{"expression":{"id":43988,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43986,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43914,"src":"1285:22:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":43987,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43980,"src":"1310:5:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1285:30:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":43989,"nodeType":"ExpressionStatement","src":"1285:30:48"}]},"baseFunctions":[51991],"functionSelector":"3d30cabf","implemented":true,"kind":"function","modifiers":[{"id":43984,"kind":"modifierInvocation","modifierName":{"id":43983,"name":"onlyGov","nameLocations":["1267:7:48"],"nodeType":"IdentifierPath","referencedDeclaration":32387,"src":"1267:7:48"},"nodeType":"ModifierInvocation","src":"1267:7:48"}],"name":"setIsGlobalShortDataReady","nameLocation":"1211:25:48","overrides":{"id":43982,"nodeType":"OverrideSpecifier","overrides":[],"src":"1258:8:48"},"parameters":{"id":43981,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43980,"mutability":"mutable","name":"value","nameLocation":"1242:5:48","nodeType":"VariableDeclaration","scope":43991,"src":"1237:10:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":43979,"name":"bool","nodeType":"ElementaryTypeName","src":"1237:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"1236:12:48"},"returnParameters":{"id":43985,"nodeType":"ParameterList","parameters":[],"src":"1275:0:48"},"scope":44541,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":44049,"nodeType":"FunctionDefinition","src":"1328:761:48","nodes":[],"body":{"id":44048,"nodeType":"Block","src":"1588:501:48","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":44015,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44011,"name":"_isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43999,"src":"1602:7:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44014,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44012,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44001,"src":"1613:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":44013,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1627:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1613:15:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1602:26:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44018,"nodeType":"IfStatement","src":"1598:63:48","trueBody":{"id":44017,"nodeType":"Block","src":"1630:31:48","statements":[{"functionReturnParameters":44010,"id":44016,"nodeType":"Return","src":"1644:7:48"}]}},{"condition":{"id":44020,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"1675:23:48","subExpression":{"id":44019,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43914,"src":"1676:22:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44023,"nodeType":"IfStatement","src":"1671:60:48","trueBody":{"id":44022,"nodeType":"Block","src":"1700:31:48","statements":[{"functionReturnParameters":44010,"id":44021,"nodeType":"Return","src":"1714:7:48"}]}},{"assignments":[44025,44027],"declarations":[{"constant":false,"id":44025,"mutability":"mutable","name":"globalShortSize","nameLocation":"1750:15:48","nodeType":"VariableDeclaration","scope":44048,"src":"1742:23:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44024,"name":"uint256","nodeType":"ElementaryTypeName","src":"1742:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44027,"mutability":"mutable","name":"globalShortAveragePrice","nameLocation":"1775:23:48","nodeType":"VariableDeclaration","scope":44048,"src":"1767:31:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44026,"name":"uint256","nodeType":"ElementaryTypeName","src":"1767:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44036,"initialValue":{"arguments":[{"id":44029,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43993,"src":"1837:8:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44030,"name":"_collateralToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43995,"src":"1847:16:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44031,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43997,"src":"1865:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44032,"name":"_markPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44003,"src":"1878:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44033,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44001,"src":"1890:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44034,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44005,"src":"1902:11:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":44028,"name":"getNextGlobalShortData","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44284,"src":"1814:22:48","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_address_$_t_address_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$_t_uint256_$","typeString":"function (address,address,address,uint256,uint256,bool) view returns (uint256,uint256)"}},"id":44035,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1814:100:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"1741:173:48"},{"expression":{"arguments":[{"id":44038,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43997,"src":"1952:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44039,"name":"globalShortAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44027,"src":"1965:23:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":44037,"name":"_setGlobalShortAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43978,"src":"1924:27:48","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":44040,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1924:65:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44041,"nodeType":"ExpressionStatement","src":"1924:65:48"},{"eventCall":{"arguments":[{"id":44043,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43997,"src":"2028:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44044,"name":"globalShortSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44025,"src":"2041:15:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44045,"name":"globalShortAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44027,"src":"2058:23:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":44042,"name":"GlobalShortDataUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43885,"src":"2005:22:48","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256)"}},"id":44046,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2005:77:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44047,"nodeType":"EmitStatement","src":"2000:82:48"}]},"baseFunctions":[51986],"functionSelector":"f3238cec","implemented":true,"kind":"function","modifiers":[{"id":44009,"kind":"modifierInvocation","modifierName":{"id":44008,"name":"onlyHandler","nameLocations":["1576:11:48"],"nodeType":"IdentifierPath","referencedDeclaration":43926,"src":"1576:11:48"},"nodeType":"ModifierInvocation","src":"1576:11:48"}],"name":"updateGlobalShortData","nameLocation":"1337:21:48","overrides":{"id":44007,"nodeType":"OverrideSpecifier","overrides":[],"src":"1567:8:48"},"parameters":{"id":44006,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43993,"mutability":"mutable","name":"_account","nameLocation":"1376:8:48","nodeType":"VariableDeclaration","scope":44049,"src":"1368:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43992,"name":"address","nodeType":"ElementaryTypeName","src":"1368:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43995,"mutability":"mutable","name":"_collateralToken","nameLocation":"1402:16:48","nodeType":"VariableDeclaration","scope":44049,"src":"1394:24:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43994,"name":"address","nodeType":"ElementaryTypeName","src":"1394:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43997,"mutability":"mutable","name":"_indexToken","nameLocation":"1436:11:48","nodeType":"VariableDeclaration","scope":44049,"src":"1428:19:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43996,"name":"address","nodeType":"ElementaryTypeName","src":"1428:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43999,"mutability":"mutable","name":"_isLong","nameLocation":"1462:7:48","nodeType":"VariableDeclaration","scope":44049,"src":"1457:12:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":43998,"name":"bool","nodeType":"ElementaryTypeName","src":"1457:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":44001,"mutability":"mutable","name":"_sizeDelta","nameLocation":"1487:10:48","nodeType":"VariableDeclaration","scope":44049,"src":"1479:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44000,"name":"uint256","nodeType":"ElementaryTypeName","src":"1479:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44003,"mutability":"mutable","name":"_markPrice","nameLocation":"1515:10:48","nodeType":"VariableDeclaration","scope":44049,"src":"1507:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44002,"name":"uint256","nodeType":"ElementaryTypeName","src":"1507:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44005,"mutability":"mutable","name":"_isIncrease","nameLocation":"1540:11:48","nodeType":"VariableDeclaration","scope":44049,"src":"1535:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44004,"name":"bool","nodeType":"ElementaryTypeName","src":"1535:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"1358:199:48"},"returnParameters":{"id":44010,"nodeType":"ParameterList","parameters":[],"src":"1588:0:48"},"scope":44541,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":44121,"nodeType":"FunctionDefinition","src":"2095:570:48","nodes":[],"body":{"id":44120,"nodeType":"Block","src":"2176:489:48","nodes":[],"statements":[{"assignments":[44059],"declarations":[{"constant":false,"id":44059,"mutability":"mutable","name":"size","nameLocation":"2194:4:48","nodeType":"VariableDeclaration","scope":44120,"src":"2186:12:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44058,"name":"uint256","nodeType":"ElementaryTypeName","src":"2186:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44064,"initialValue":{"arguments":[{"id":44062,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44051,"src":"2224:6:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"id":44060,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43898,"src":"2201:5:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"id":44061,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2207:16:48","memberName":"globalShortSizes","nodeType":"MemberAccess","referencedDeclaration":52512,"src":"2201:22:48","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":44063,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2201:30:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2186:45:48"},{"assignments":[44066],"declarations":[{"constant":false,"id":44066,"mutability":"mutable","name":"averagePrice","nameLocation":"2249:12:48","nodeType":"VariableDeclaration","scope":44120,"src":"2241:20:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44065,"name":"uint256","nodeType":"ElementaryTypeName","src":"2241:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44070,"initialValue":{"baseExpression":{"id":44067,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43911,"src":"2264:24:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":44069,"indexExpression":{"id":44068,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44051,"src":"2289:6:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2264:32:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2241:55:48"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44073,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44071,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44059,"src":"2310:4:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":44072,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2318:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2310:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44078,"nodeType":"IfStatement","src":"2306:32:48","trueBody":{"expression":{"components":[{"hexValue":"66616c7365","id":44074,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"2329:5:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},{"hexValue":"30","id":44075,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2336:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"id":44076,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"2328:10:48","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_rational_0_by_1_$","typeString":"tuple(bool,int_const 0)"}},"functionReturnParameters":44057,"id":44077,"nodeType":"Return","src":"2321:17:48"}},{"assignments":[44080],"declarations":[{"constant":false,"id":44080,"mutability":"mutable","name":"nextPrice","nameLocation":"2357:9:48","nodeType":"VariableDeclaration","scope":44120,"src":"2349:17:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44079,"name":"uint256","nodeType":"ElementaryTypeName","src":"2349:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44087,"initialValue":{"arguments":[{"id":44085,"name":"_token","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44051,"src":"2395:6:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":44082,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43898,"src":"2376:5:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}],"id":44081,"name":"IVault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52650,"src":"2369:6:48","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IVault_$52650_$","typeString":"type(contract IVault)"}},"id":44083,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2369:13:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"id":44084,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2383:11:48","memberName":"getMaxPrice","nodeType":"MemberAccess","referencedDeclaration":52598,"src":"2369:25:48","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":44086,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2369:33:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2349:53:48"},{"assignments":[44089],"declarations":[{"constant":false,"id":44089,"mutability":"mutable","name":"priceDelta","nameLocation":"2420:10:48","nodeType":"VariableDeclaration","scope":44120,"src":"2412:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44088,"name":"uint256","nodeType":"ElementaryTypeName","src":"2412:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44100,"initialValue":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44092,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44090,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44066,"src":"2433:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":44091,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44080,"src":"2448:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2433:24:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44098,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44096,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44080,"src":"2487:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44097,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44066,"src":"2499:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2487:24:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44099,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"2433:78:48","trueExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44095,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44093,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44066,"src":"2460:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44094,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44080,"src":"2475:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2460:24:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2412:99:48"},{"assignments":[44102],"declarations":[{"constant":false,"id":44102,"mutability":"mutable","name":"delta","nameLocation":"2529:5:48","nodeType":"VariableDeclaration","scope":44120,"src":"2521:13:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44101,"name":"uint256","nodeType":"ElementaryTypeName","src":"2521:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44109,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44108,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44105,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44103,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44059,"src":"2538:4:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":44104,"name":"priceDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44089,"src":"2545:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2538:17:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44106,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2537:19:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":44107,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44066,"src":"2559:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2537:34:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2521:50:48"},{"assignments":[44111],"declarations":[{"constant":false,"id":44111,"mutability":"mutable","name":"hasProfit","nameLocation":"2586:9:48","nodeType":"VariableDeclaration","scope":44120,"src":"2581:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44110,"name":"bool","nodeType":"ElementaryTypeName","src":"2581:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":44115,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44114,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44112,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44066,"src":"2598:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":44113,"name":"nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44080,"src":"2613:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2598:24:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"2581:41:48"},{"expression":{"components":[{"id":44116,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44111,"src":"2641:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"id":44117,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44102,"src":"2652:5:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44118,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2640:18:48","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"functionReturnParameters":44057,"id":44119,"nodeType":"Return","src":"2633:25:48"}]},"functionSelector":"b364accb","implemented":true,"kind":"function","modifiers":[],"name":"getGlobalShortDelta","nameLocation":"2104:19:48","parameters":{"id":44052,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44051,"mutability":"mutable","name":"_token","nameLocation":"2132:6:48","nodeType":"VariableDeclaration","scope":44121,"src":"2124:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44050,"name":"address","nodeType":"ElementaryTypeName","src":"2124:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2123:16:48"},"returnParameters":{"id":44057,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44054,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44121,"src":"2161:4:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44053,"name":"bool","nodeType":"ElementaryTypeName","src":"2161:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":44056,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44121,"src":"2167:7:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44055,"name":"uint256","nodeType":"ElementaryTypeName","src":"2167:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2160:15:48"},"scope":44541,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":44167,"nodeType":"FunctionDefinition","src":"2671:369:48","nodes":[],"body":{"id":44166,"nodeType":"Block","src":"2781:259:48","nodes":[],"statements":[{"expression":{"arguments":[{"id":44135,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"2799:23:48","subExpression":{"id":44134,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43914,"src":"2800:22:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"53686f727473547261636b65723a20616c7265616479206d69677261746564","id":44136,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2824:33:48","typeDescriptions":{"typeIdentifier":"t_stringliteral_b74aff559421eb4e443a51acea534ca3f49b7f0e6c8f0d058194fd503f67bee1","typeString":"literal_string \"ShortsTracker: already migrated\""},"value":"ShortsTracker: already migrated"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b74aff559421eb4e443a51acea534ca3f49b7f0e6c8f0d058194fd503f67bee1","typeString":"literal_string \"ShortsTracker: already migrated\""}],"id":44133,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"2791:7:48","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":44137,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2791:67:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44138,"nodeType":"ExpressionStatement","src":"2791:67:48"},{"body":{"id":44160,"nodeType":"Block","src":"2914:81:48","statements":[{"expression":{"id":44158,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":44150,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43911,"src":"2928:24:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":44154,"indexExpression":{"baseExpression":{"id":44151,"name":"_tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44124,"src":"2953:7:48","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}},"id":44153,"indexExpression":{"id":44152,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44140,"src":"2961:1:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2953:10:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"2928:36:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"baseExpression":{"id":44155,"name":"_averagePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44127,"src":"2967:14:48","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[] calldata"}},"id":44157,"indexExpression":{"id":44156,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44140,"src":"2982:1:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2967:17:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2928:56:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44159,"nodeType":"ExpressionStatement","src":"2928:56:48"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44146,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44143,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44140,"src":"2889:1:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":44144,"name":"_tokens","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44124,"src":"2893:7:48","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[] calldata"}},"id":44145,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2901:6:48","memberName":"length","nodeType":"MemberAccess","src":"2893:14:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2889:18:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44161,"initializationExpression":{"assignments":[44140],"declarations":[{"constant":false,"id":44140,"mutability":"mutable","name":"i","nameLocation":"2882:1:48","nodeType":"VariableDeclaration","scope":44161,"src":"2874:9:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44139,"name":"uint256","nodeType":"ElementaryTypeName","src":"2874:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44142,"initialValue":{"hexValue":"30","id":44141,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2886:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"2874:13:48"},"loopExpression":{"expression":{"id":44148,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":false,"src":"2909:3:48","subExpression":{"id":44147,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44140,"src":"2909:1:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44149,"nodeType":"ExpressionStatement","src":"2909:3:48"},"nodeType":"ForStatement","src":"2869:126:48"},{"expression":{"id":44164,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44162,"name":"isGlobalShortDataReady","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43914,"src":"3004:22:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":44163,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"3029:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"3004:29:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44165,"nodeType":"ExpressionStatement","src":"3004:29:48"}]},"baseFunctions":[52000],"functionSelector":"bbd97187","implemented":true,"kind":"function","modifiers":[{"id":44131,"kind":"modifierInvocation","modifierName":{"id":44130,"name":"onlyGov","nameLocations":["2773:7:48"],"nodeType":"IdentifierPath","referencedDeclaration":32387,"src":"2773:7:48"},"nodeType":"ModifierInvocation","src":"2773:7:48"}],"name":"setInitData","nameLocation":"2680:11:48","overrides":{"id":44129,"nodeType":"OverrideSpecifier","overrides":[],"src":"2764:8:48"},"parameters":{"id":44128,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44124,"mutability":"mutable","name":"_tokens","nameLocation":"2711:7:48","nodeType":"VariableDeclaration","scope":44167,"src":"2692:26:48","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_calldata_ptr","typeString":"address[]"},"typeName":{"baseType":{"id":44122,"name":"address","nodeType":"ElementaryTypeName","src":"2692:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":44123,"nodeType":"ArrayTypeName","src":"2692:9:48","typeDescriptions":{"typeIdentifier":"t_array$_t_address_$dyn_storage_ptr","typeString":"address[]"}},"visibility":"internal"},{"constant":false,"id":44127,"mutability":"mutable","name":"_averagePrices","nameLocation":"2739:14:48","nodeType":"VariableDeclaration","scope":44167,"src":"2720:33:48","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":44125,"name":"uint256","nodeType":"ElementaryTypeName","src":"2720:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44126,"nodeType":"ArrayTypeName","src":"2720:9:48","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"}],"src":"2691:63:48"},"returnParameters":{"id":44132,"nodeType":"ParameterList","parameters":[],"src":"2781:0:48"},"scope":44541,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":44284,"nodeType":"FunctionDefinition","src":"3046:1201:48","nodes":[],"body":{"id":44283,"nodeType":"Block","src":"3303:944:48","nodes":[],"statements":[{"assignments":[44188],"declarations":[{"constant":false,"id":44188,"mutability":"mutable","name":"realisedPnl","nameLocation":"3320:11:48","nodeType":"VariableDeclaration","scope":44283,"src":"3313:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":44187,"name":"int256","nodeType":"ElementaryTypeName","src":"3313:6:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":44196,"initialValue":{"arguments":[{"id":44190,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44169,"src":"3349:8:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44191,"name":"_collateralToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44171,"src":"3359:16:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44192,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44173,"src":"3377:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44193,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44177,"src":"3390:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44194,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44179,"src":"3402:11:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"id":44189,"name":"getRealisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44365,"src":"3334:14:48","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_address_$_t_address_$_t_uint256_$_t_bool_$returns$_t_int256_$","typeString":"function (address,address,address,uint256,bool) view returns (int256)"}},"id":44195,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3334:80:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"3313:101:48"},{"assignments":[44198],"declarations":[{"constant":false,"id":44198,"mutability":"mutable","name":"averagePrice","nameLocation":"3432:12:48","nodeType":"VariableDeclaration","scope":44283,"src":"3424:20:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44197,"name":"uint256","nodeType":"ElementaryTypeName","src":"3424:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44202,"initialValue":{"baseExpression":{"id":44199,"name":"globalShortAveragePrices","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43911,"src":"3447:24:48","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_uint256_$","typeString":"mapping(address => uint256)"}},"id":44201,"indexExpression":{"id":44200,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44173,"src":"3472:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"3447:37:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3424:60:48"},{"assignments":[44204],"declarations":[{"constant":false,"id":44204,"mutability":"mutable","name":"priceDelta","nameLocation":"3502:10:48","nodeType":"VariableDeclaration","scope":44283,"src":"3494:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44203,"name":"uint256","nodeType":"ElementaryTypeName","src":"3494:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44216,"initialValue":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44207,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44205,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44198,"src":"3515:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":44206,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"3530:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3515:25:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44214,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44212,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"3573:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44213,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44198,"src":"3586:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3573:25:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44215,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"3515:83:48","trueExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44210,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44208,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44198,"src":"3544:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44209,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"3559:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3544:25:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44211,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"3543:27:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3494:104:48"},{"assignments":[44218],"declarations":[{"constant":false,"id":44218,"mutability":"mutable","name":"nextSize","nameLocation":"3617:8:48","nodeType":"VariableDeclaration","scope":44283,"src":"3609:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44217,"name":"uint256","nodeType":"ElementaryTypeName","src":"3609:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44219,"nodeType":"VariableDeclarationStatement","src":"3609:16:48"},{"assignments":[44221],"declarations":[{"constant":false,"id":44221,"mutability":"mutable","name":"delta","nameLocation":"3643:5:48","nodeType":"VariableDeclaration","scope":44283,"src":"3635:13:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44220,"name":"uint256","nodeType":"ElementaryTypeName","src":"3635:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44222,"nodeType":"VariableDeclarationStatement","src":"3635:13:48"},{"id":44268,"nodeType":"Block","src":"3689:386:48","statements":[{"assignments":[44224],"declarations":[{"constant":false,"id":44224,"mutability":"mutable","name":"size","nameLocation":"3711:4:48","nodeType":"VariableDeclaration","scope":44268,"src":"3703:12:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44223,"name":"uint256","nodeType":"ElementaryTypeName","src":"3703:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44229,"initialValue":{"arguments":[{"id":44227,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44173,"src":"3741:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"id":44225,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43898,"src":"3718:5:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"id":44226,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3724:16:48","memberName":"globalShortSizes","nodeType":"MemberAccess","referencedDeclaration":52512,"src":"3718:22:48","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":44228,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3718:35:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3703:50:48"},{"expression":{"id":44239,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44230,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44218,"src":"3767:8:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"condition":{"id":44231,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44179,"src":"3778:11:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44237,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44235,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44224,"src":"3812:4:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44236,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44177,"src":"3819:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3812:17:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44238,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"3778:51:48","trueExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44234,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44232,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44224,"src":"3792:4:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":44233,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44177,"src":"3799:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3792:17:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3767:62:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44240,"nodeType":"ExpressionStatement","src":"3767:62:48"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44243,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44241,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44218,"src":"3848:8:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":44242,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3860:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3848:13:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44249,"nodeType":"IfStatement","src":"3844:65:48","trueBody":{"id":44248,"nodeType":"Block","src":"3863:46:48","statements":[{"expression":{"components":[{"hexValue":"30","id":44244,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3889:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},{"hexValue":"30","id":44245,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3892:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"id":44246,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"TupleExpression","src":"3888:6:48","typeDescriptions":{"typeIdentifier":"t_tuple$_t_rational_0_by_1_$_t_rational_0_by_1_$","typeString":"tuple(int_const 0,int_const 0)"}},"functionReturnParameters":44186,"id":44247,"nodeType":"Return","src":"3881:13:48"}]}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44252,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44250,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44198,"src":"3927:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":44251,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3943:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3927:17:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44258,"nodeType":"IfStatement","src":"3923:85:48","trueBody":{"id":44257,"nodeType":"Block","src":"3946:62:48","statements":[{"expression":{"components":[{"id":44253,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44218,"src":"3972:8:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44254,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"3982:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44255,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"3971:22:48","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"functionReturnParameters":44186,"id":44256,"nodeType":"Return","src":"3964:29:48"}]}},{"expression":{"id":44266,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44259,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44221,"src":"4022:5:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44265,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44262,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44260,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44224,"src":"4031:4:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":44261,"name":"priceDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44204,"src":"4038:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4031:17:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44263,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4030:19:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":44264,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44198,"src":"4052:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4030:34:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4022:42:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44267,"nodeType":"ExpressionStatement","src":"4022:42:48"}]},{"assignments":[44270],"declarations":[{"constant":false,"id":44270,"mutability":"mutable","name":"nextAveragePrice","nameLocation":"4093:16:48","nodeType":"VariableDeclaration","scope":44283,"src":"4085:24:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44269,"name":"uint256","nodeType":"ElementaryTypeName","src":"4085:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44278,"initialValue":{"arguments":[{"id":44272,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44198,"src":"4139:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44273,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"4153:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44274,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44218,"src":"4165:8:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44275,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44221,"src":"4175:5:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44276,"name":"realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44188,"src":"4182:11:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44271,"name":"_getNextGlobalAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44411,"src":"4112:26:48","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,int256) pure returns (uint256)"}},"id":44277,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4112:82:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4085:109:48"},{"expression":{"components":[{"id":44279,"name":"nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44218,"src":"4213:8:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44280,"name":"nextAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44270,"src":"4223:16:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44281,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4212:28:48","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"functionReturnParameters":44186,"id":44282,"nodeType":"Return","src":"4205:35:48"}]},"baseFunctions":[51969],"functionSelector":"9cdeb593","implemented":true,"kind":"function","modifiers":[],"name":"getNextGlobalShortData","nameLocation":"3055:22:48","overrides":{"id":44181,"nodeType":"OverrideSpecifier","overrides":[],"src":"3267:8:48"},"parameters":{"id":44180,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44169,"mutability":"mutable","name":"_account","nameLocation":"3095:8:48","nodeType":"VariableDeclaration","scope":44284,"src":"3087:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44168,"name":"address","nodeType":"ElementaryTypeName","src":"3087:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44171,"mutability":"mutable","name":"_collateralToken","nameLocation":"3121:16:48","nodeType":"VariableDeclaration","scope":44284,"src":"3113:24:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44170,"name":"address","nodeType":"ElementaryTypeName","src":"3113:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44173,"mutability":"mutable","name":"_indexToken","nameLocation":"3155:11:48","nodeType":"VariableDeclaration","scope":44284,"src":"3147:19:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44172,"name":"address","nodeType":"ElementaryTypeName","src":"3147:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44175,"mutability":"mutable","name":"_nextPrice","nameLocation":"3184:10:48","nodeType":"VariableDeclaration","scope":44284,"src":"3176:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44174,"name":"uint256","nodeType":"ElementaryTypeName","src":"3176:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44177,"mutability":"mutable","name":"_sizeDelta","nameLocation":"3212:10:48","nodeType":"VariableDeclaration","scope":44284,"src":"3204:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44176,"name":"uint256","nodeType":"ElementaryTypeName","src":"3204:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44179,"mutability":"mutable","name":"_isIncrease","nameLocation":"3237:11:48","nodeType":"VariableDeclaration","scope":44284,"src":"3232:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44178,"name":"bool","nodeType":"ElementaryTypeName","src":"3232:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3077:177:48"},"returnParameters":{"id":44186,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44183,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44284,"src":"3285:7:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44182,"name":"uint256","nodeType":"ElementaryTypeName","src":"3285:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44185,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44284,"src":"3294:7:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44184,"name":"uint256","nodeType":"ElementaryTypeName","src":"3294:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3284:18:48"},"scope":44541,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":44365,"nodeType":"FunctionDefinition","src":"4253:855:48","nodes":[],"body":{"id":44364,"nodeType":"Block","src":"4455:653:48","nodes":[],"statements":[{"condition":{"id":44299,"name":"_isIncrease","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44294,"src":"4469:11:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44303,"nodeType":"IfStatement","src":"4465:50:48","trueBody":{"id":44302,"nodeType":"Block","src":"4482:33:48","statements":[{"expression":{"hexValue":"30","id":44300,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4503:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":44298,"id":44301,"nodeType":"Return","src":"4496:8:48"}]}},{"assignments":[44306],"declarations":[{"constant":false,"id":44306,"mutability":"mutable","name":"_vault","nameLocation":"4532:6:48","nodeType":"VariableDeclaration","scope":44364,"src":"4525:13:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"},"typeName":{"id":44305,"nodeType":"UserDefinedTypeName","pathNode":{"id":44304,"name":"IVault","nameLocations":["4525:6:48"],"nodeType":"IdentifierPath","referencedDeclaration":52650,"src":"4525:6:48"},"referencedDeclaration":52650,"src":"4525:6:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"visibility":"internal"}],"id":44308,"initialValue":{"id":44307,"name":"vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43898,"src":"4541:5:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"nodeType":"VariableDeclarationStatement","src":"4525:21:48"},{"assignments":[44310,null,44312,null,null,null,null,44314],"declarations":[{"constant":false,"id":44310,"mutability":"mutable","name":"size","nameLocation":"4565:4:48","nodeType":"VariableDeclaration","scope":44364,"src":"4557:12:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44309,"name":"uint256","nodeType":"ElementaryTypeName","src":"4557:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},null,{"constant":false,"id":44312,"mutability":"mutable","name":"averagePrice","nameLocation":"4603:12:48","nodeType":"VariableDeclaration","scope":44364,"src":"4595:20:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44311,"name":"uint256","nodeType":"ElementaryTypeName","src":"4595:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},null,null,null,null,{"constant":false,"id":44314,"mutability":"mutable","name":"lastIncreasedTime","nameLocation":"4629:17:48","nodeType":"VariableDeclaration","scope":44364,"src":"4621:25:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44313,"name":"uint256","nodeType":"ElementaryTypeName","src":"4621:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44322,"initialValue":{"arguments":[{"id":44317,"name":"_account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44286,"src":"4681:8:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44318,"name":"_collateralToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44288,"src":"4691:16:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44319,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44290,"src":"4709:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"hexValue":"66616c7365","id":44320,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4722:5:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"id":44315,"name":"_vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44306,"src":"4662:6:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"id":44316,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4669:11:48","memberName":"getPosition","nodeType":"MemberAccess","referencedDeclaration":52649,"src":"4662:18:48","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$_t_address_$_t_address_$_t_bool_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_uint256_$","typeString":"function (address,address,address,bool) view external returns (uint256,uint256,uint256,uint256,uint256,uint256,bool,uint256)"}},"id":44321,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4662:66:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256,uint256,uint256,bool,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"4556:172:48"},{"assignments":[44324,44326],"declarations":[{"constant":false,"id":44324,"mutability":"mutable","name":"hasProfit","nameLocation":"4745:9:48","nodeType":"VariableDeclaration","scope":44364,"src":"4740:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44323,"name":"bool","nodeType":"ElementaryTypeName","src":"4740:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":44326,"mutability":"mutable","name":"delta","nameLocation":"4764:5:48","nodeType":"VariableDeclaration","scope":44364,"src":"4756:13:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44325,"name":"uint256","nodeType":"ElementaryTypeName","src":"4756:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44335,"initialValue":{"arguments":[{"id":44329,"name":"_indexToken","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44290,"src":"4789:11:48","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":44330,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44310,"src":"4802:4:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44331,"name":"averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44312,"src":"4808:12:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"66616c7365","id":44332,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"4822:5:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},{"id":44333,"name":"lastIncreasedTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44314,"src":"4829:17:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":44327,"name":"_vault","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44306,"src":"4773:6:48","typeDescriptions":{"typeIdentifier":"t_contract$_IVault_$52650","typeString":"contract IVault"}},"id":44328,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4780:8:48","memberName":"getDelta","nodeType":"MemberAccess","referencedDeclaration":52622,"src":"4773:15:48","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$_t_uint256_$_t_uint256_$_t_bool_$_t_uint256_$returns$_t_bool_$_t_uint256_$","typeString":"function (address,uint256,uint256,bool,uint256) view external returns (bool,uint256)"}},"id":44334,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4773:74:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"4739:108:48"},{"assignments":[44337],"declarations":[{"constant":false,"id":44337,"mutability":"mutable","name":"adjustedDelta","nameLocation":"4911:13:48","nodeType":"VariableDeclaration","scope":44364,"src":"4903:21:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44336,"name":"uint256","nodeType":"ElementaryTypeName","src":"4903:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44344,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44343,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44340,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44338,"name":"_sizeDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44292,"src":"4928:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":44339,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44326,"src":"4941:5:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4928:18:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44341,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4927:20:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":44342,"name":"size","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44310,"src":"4950:4:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4927:27:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4903:51:48"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44348,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44346,"name":"adjustedDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44337,"src":"4972:13:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":44347,"name":"MAX_INT256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43895,"src":"4988:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4972:26:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"53686f727473547261636b65723a206f766572666c6f77","id":44349,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"5000:25:48","typeDescriptions":{"typeIdentifier":"t_stringliteral_5d5cea51d82e1abca3d2b7ea9999f793f9a386ab0bccbd1010ee4f2ea516eedd","typeString":"literal_string \"ShortsTracker: overflow\""},"value":"ShortsTracker: overflow"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_5d5cea51d82e1abca3d2b7ea9999f793f9a386ab0bccbd1010ee4f2ea516eedd","typeString":"literal_string \"ShortsTracker: overflow\""}],"id":44345,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"4964:7:48","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":44350,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4964:62:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44351,"nodeType":"ExpressionStatement","src":"4964:62:48"},{"expression":{"condition":{"id":44352,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44324,"src":"5043:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"id":44361,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"5079:22:48","subExpression":{"arguments":[{"id":44359,"name":"adjustedDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44337,"src":"5087:13:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":44358,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5080:6:48","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":44357,"name":"int256","nodeType":"ElementaryTypeName","src":"5080:6:48","typeDescriptions":{}}},"id":44360,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5080:21:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":44362,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"5043:58:48","trueExpression":{"arguments":[{"id":44355,"name":"adjustedDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44337,"src":"5062:13:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":44354,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5055:6:48","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":44353,"name":"int256","nodeType":"ElementaryTypeName","src":"5055:6:48","typeDescriptions":{}}},"id":44356,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5055:21:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"functionReturnParameters":44298,"id":44363,"nodeType":"Return","src":"5036:65:48"}]},"functionSelector":"a83b75fd","implemented":true,"kind":"function","modifiers":[],"name":"getRealisedPnl","nameLocation":"4262:14:48","parameters":{"id":44295,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44286,"mutability":"mutable","name":"_account","nameLocation":"4294:8:48","nodeType":"VariableDeclaration","scope":44365,"src":"4286:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44285,"name":"address","nodeType":"ElementaryTypeName","src":"4286:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44288,"mutability":"mutable","name":"_collateralToken","nameLocation":"4320:16:48","nodeType":"VariableDeclaration","scope":44365,"src":"4312:24:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44287,"name":"address","nodeType":"ElementaryTypeName","src":"4312:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44290,"mutability":"mutable","name":"_indexToken","nameLocation":"4354:11:48","nodeType":"VariableDeclaration","scope":44365,"src":"4346:19:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44289,"name":"address","nodeType":"ElementaryTypeName","src":"4346:7:48","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44292,"mutability":"mutable","name":"_sizeDelta","nameLocation":"4383:10:48","nodeType":"VariableDeclaration","scope":44365,"src":"4375:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44291,"name":"uint256","nodeType":"ElementaryTypeName","src":"4375:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44294,"mutability":"mutable","name":"_isIncrease","nameLocation":"4408:11:48","nodeType":"VariableDeclaration","scope":44365,"src":"4403:16:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44293,"name":"bool","nodeType":"ElementaryTypeName","src":"4403:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"4276:149:48"},"returnParameters":{"id":44298,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44297,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44365,"src":"4447:6:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":44296,"name":"int256","nodeType":"ElementaryTypeName","src":"4447:6:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"4446:8:48"},"scope":44541,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":44411,"nodeType":"FunctionDefinition","src":"5114:498:48","nodes":[],"body":{"id":44410,"nodeType":"Block","src":"5325:287:48","nodes":[],"statements":[{"assignments":[44381,44383],"declarations":[{"constant":false,"id":44381,"mutability":"mutable","name":"hasProfit","nameLocation":"5341:9:48","nodeType":"VariableDeclaration","scope":44410,"src":"5336:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44380,"name":"bool","nodeType":"ElementaryTypeName","src":"5336:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":44383,"mutability":"mutable","name":"nextDelta","nameLocation":"5360:9:48","nodeType":"VariableDeclaration","scope":44410,"src":"5352:17:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44382,"name":"uint256","nodeType":"ElementaryTypeName","src":"5352:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44390,"initialValue":{"arguments":[{"id":44385,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44373,"src":"5387:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44386,"name":"_averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44367,"src":"5395:13:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44387,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44369,"src":"5410:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":44388,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44375,"src":"5422:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44384,"name":"_getNextDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44540,"src":"5373:13:48","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$returns$_t_bool_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,int256) pure returns (bool,uint256)"}},"id":44389,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5373:62:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"5335:100:48"},{"assignments":[44392],"declarations":[{"constant":false,"id":44392,"mutability":"mutable","name":"nextAveragePrice","nameLocation":"5454:16:48","nodeType":"VariableDeclaration","scope":44410,"src":"5446:24:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44391,"name":"uint256","nodeType":"ElementaryTypeName","src":"5446:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44407,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44406,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44395,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44393,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44369,"src":"5486:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":44394,"name":"_nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44371,"src":"5499:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5486:22:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44396,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"5485:24:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"components":[{"condition":{"id":44397,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44381,"src":"5513:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44403,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44401,"name":"_nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44371,"src":"5549:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":44402,"name":"nextDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44383,"src":"5561:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5549:21:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44404,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"5513:57:48","trueExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44400,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44398,"name":"_nextSize","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44371,"src":"5525:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44399,"name":"nextDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44383,"src":"5537:9:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5525:21:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44405,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"5512:59:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5485:86:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5446:125:48"},{"expression":{"id":44408,"name":"nextAveragePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44392,"src":"5589:16:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":44379,"id":44409,"nodeType":"Return","src":"5582:23:48"}]},"functionSelector":"5886b711","implemented":true,"kind":"function","modifiers":[],"name":"_getNextGlobalAveragePrice","nameLocation":"5123:26:48","parameters":{"id":44376,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44367,"mutability":"mutable","name":"_averagePrice","nameLocation":"5167:13:48","nodeType":"VariableDeclaration","scope":44411,"src":"5159:21:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44366,"name":"uint256","nodeType":"ElementaryTypeName","src":"5159:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44369,"mutability":"mutable","name":"_nextPrice","nameLocation":"5198:10:48","nodeType":"VariableDeclaration","scope":44411,"src":"5190:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44368,"name":"uint256","nodeType":"ElementaryTypeName","src":"5190:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44371,"mutability":"mutable","name":"_nextSize","nameLocation":"5226:9:48","nodeType":"VariableDeclaration","scope":44411,"src":"5218:17:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44370,"name":"uint256","nodeType":"ElementaryTypeName","src":"5218:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44373,"mutability":"mutable","name":"_delta","nameLocation":"5253:6:48","nodeType":"VariableDeclaration","scope":44411,"src":"5245:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44372,"name":"uint256","nodeType":"ElementaryTypeName","src":"5245:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44375,"mutability":"mutable","name":"_realisedPnl","nameLocation":"5276:12:48","nodeType":"VariableDeclaration","scope":44411,"src":"5269:19:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":44374,"name":"int256","nodeType":"ElementaryTypeName","src":"5269:6:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"5149:145:48"},"returnParameters":{"id":44379,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44378,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44411,"src":"5316:7:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44377,"name":"uint256","nodeType":"ElementaryTypeName","src":"5316:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5315:9:48"},"scope":44541,"stateMutability":"pure","virtual":false,"visibility":"public"},{"id":44540,"nodeType":"FunctionDefinition","src":"5618:1552:48","nodes":[],"body":{"id":44539,"nodeType":"Block","src":"5787:1383:48","nodes":[],"statements":[{"assignments":[44427],"declarations":[{"constant":false,"id":44427,"mutability":"mutable","name":"hasProfit","nameLocation":"6232:9:48","nodeType":"VariableDeclaration","scope":44539,"src":"6227:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44426,"name":"bool","nodeType":"ElementaryTypeName","src":"6227:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":44431,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44430,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44428,"name":"_averagePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44415,"src":"6244:13:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":44429,"name":"_nextPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44417,"src":"6260:10:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6244:26:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"6227:43:48"},{"condition":{"id":44432,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44427,"src":"6284:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44485,"nodeType":"IfStatement","src":"6280:499:48","trueBody":{"id":44484,"nodeType":"Block","src":"6295:484:48","statements":[{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":44435,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44433,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6358:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":44434,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6373:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6358:16:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":44478,"nodeType":"Block","src":"6655:73:48","statements":[{"expression":{"id":44476,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44468,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6673:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44475,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44469,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6682:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"id":44473,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"6699:13:48","subExpression":{"id":44472,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6700:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44471,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6691:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44470,"name":"uint256","nodeType":"ElementaryTypeName","src":"6691:7:48","typeDescriptions":{}}},"id":44474,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6691:22:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6682:31:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6673:40:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44477,"nodeType":"ExpressionStatement","src":"6673:40:48"}]},"id":44479,"nodeType":"IfStatement","src":"6354:374:48","trueBody":{"id":44467,"nodeType":"Block","src":"6376:273:48","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44441,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":44438,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6406:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44437,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6398:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44436,"name":"uint256","nodeType":"ElementaryTypeName","src":"6398:7:48","typeDescriptions":{}}},"id":44439,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6398:21:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":44440,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6422:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6398:30:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":44465,"nodeType":"Block","src":"6555:80:48","statements":[{"expression":{"id":44463,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44456,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6577:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44462,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44457,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6586:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"id":44460,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6603:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44459,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6595:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44458,"name":"uint256","nodeType":"ElementaryTypeName","src":"6595:7:48","typeDescriptions":{}}},"id":44461,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6595:21:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6586:30:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6577:39:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44464,"nodeType":"ExpressionStatement","src":"6577:39:48"}]},"id":44466,"nodeType":"IfStatement","src":"6394:241:48","trueBody":{"id":44455,"nodeType":"Block","src":"6430:119:48","statements":[{"expression":{"id":44449,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44442,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6452:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44448,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":44445,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6469:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44444,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6461:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44443,"name":"uint256","nodeType":"ElementaryTypeName","src":"6461:7:48","typeDescriptions":{}}},"id":44446,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6461:21:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44447,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6485:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6461:30:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6452:39:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44450,"nodeType":"ExpressionStatement","src":"6452:39:48"},{"expression":{"id":44453,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44451,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44427,"src":"6513:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"66616c7365","id":44452,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"6525:5:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"6513:17:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44454,"nodeType":"ExpressionStatement","src":"6513:17:48"}]}}]}},{"expression":{"components":[{"id":44480,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44427,"src":"6750:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"id":44481,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6761:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44482,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"6749:19:48","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"functionReturnParameters":44425,"id":44483,"nodeType":"Return","src":"6742:26:48"}]}},{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":44488,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44486,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6793:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":44487,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6808:1:48","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6793:16:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":44533,"nodeType":"Block","src":"6881:247:48","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44505,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":44502,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"6907:13:48","subExpression":{"id":44501,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6908:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44500,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6899:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44499,"name":"uint256","nodeType":"ElementaryTypeName","src":"6899:7:48","typeDescriptions":{}}},"id":44503,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6899:22:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":44504,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6924:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6899:31:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":44531,"nodeType":"Block","src":"7045:73:48","statements":[{"expression":{"id":44529,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44521,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"7063:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44528,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44522,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"7072:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"id":44526,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"7089:13:48","subExpression":{"id":44525,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"7090:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44524,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7081:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44523,"name":"uint256","nodeType":"ElementaryTypeName","src":"7081:7:48","typeDescriptions":{}}},"id":44527,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7081:22:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7072:31:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7063:40:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44530,"nodeType":"ExpressionStatement","src":"7063:40:48"}]},"id":44532,"nodeType":"IfStatement","src":"6895:223:48","trueBody":{"id":44520,"nodeType":"Block","src":"6932:107:48","statements":[{"expression":{"id":44514,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44506,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6950:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44513,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":44510,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"6967:13:48","subExpression":{"id":44509,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6968:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44508,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6959:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44507,"name":"uint256","nodeType":"ElementaryTypeName","src":"6959:7:48","typeDescriptions":{}}},"id":44511,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6959:22:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":44512,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6984:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6959:31:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6950:40:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44515,"nodeType":"ExpressionStatement","src":"6950:40:48"},{"expression":{"id":44518,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44516,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44427,"src":"7008:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":44517,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"7020:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"7008:16:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44519,"nodeType":"ExpressionStatement","src":"7008:16:48"}]}}]},"id":44534,"nodeType":"IfStatement","src":"6789:339:48","trueBody":{"id":44498,"nodeType":"Block","src":"6811:64:48","statements":[{"expression":{"id":44496,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44489,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6825:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44495,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44490,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"6834:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"id":44493,"name":"_realisedPnl","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44419,"src":"6851:12:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":44492,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6843:7:48","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":44491,"name":"uint256","nodeType":"ElementaryTypeName","src":"6843:7:48","typeDescriptions":{}}},"id":44494,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6843:21:48","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6834:30:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6825:39:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44497,"nodeType":"ExpressionStatement","src":"6825:39:48"}]}},{"expression":{"components":[{"id":44535,"name":"hasProfit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44427,"src":"7145:9:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"id":44536,"name":"_delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44413,"src":"7156:6:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":44537,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7144:19:48","typeDescriptions":{"typeIdentifier":"t_tuple$_t_bool_$_t_uint256_$","typeString":"tuple(bool,uint256)"}},"functionReturnParameters":44425,"id":44538,"nodeType":"Return","src":"7137:26:48"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_getNextDelta","nameLocation":"5627:13:48","parameters":{"id":44420,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44413,"mutability":"mutable","name":"_delta","nameLocation":"5649:6:48","nodeType":"VariableDeclaration","scope":44540,"src":"5641:14:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44412,"name":"uint256","nodeType":"ElementaryTypeName","src":"5641:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44415,"mutability":"mutable","name":"_averagePrice","nameLocation":"5665:13:48","nodeType":"VariableDeclaration","scope":44540,"src":"5657:21:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44414,"name":"uint256","nodeType":"ElementaryTypeName","src":"5657:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44417,"mutability":"mutable","name":"_nextPrice","nameLocation":"5688:10:48","nodeType":"VariableDeclaration","scope":44540,"src":"5680:18:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44416,"name":"uint256","nodeType":"ElementaryTypeName","src":"5680:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":44419,"mutability":"mutable","name":"_realisedPnl","nameLocation":"5707:12:48","nodeType":"VariableDeclaration","scope":44540,"src":"5700:19:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":44418,"name":"int256","nodeType":"ElementaryTypeName","src":"5700:6:48","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"5640:80:48"},"returnParameters":{"id":44425,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44422,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44540,"src":"5768:4:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44421,"name":"bool","nodeType":"ElementaryTypeName","src":"5768:4:48","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":44424,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44540,"src":"5774:7:48","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44423,"name":"uint256","nodeType":"ElementaryTypeName","src":"5774:7:48","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5767:15:48"},"scope":44541,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[{"baseName":{"id":43874,"name":"Governable","nameLocations":["196:10:48"],"nodeType":"IdentifierPath","referencedDeclaration":32410,"src":"196:10:48"},"id":43875,"nodeType":"InheritanceSpecifier","src":"196:10:48"},{"baseName":{"id":43876,"name":"IShortsTracker","nameLocations":["208:14:48"],"nodeType":"IdentifierPath","referencedDeclaration":52008,"src":"208:14:48"},"id":43877,"nodeType":"InheritanceSpecifier","src":"208:14:48"}],"canonicalName":"ShortsTracker","contractDependencies":[],"contractKind":"contract","fullyImplemented":true,"linearizedBaseContracts":[44541,52008,32410],"name":"ShortsTracker","nameLocation":"179:13:48","scope":44542,"usedErrors":[]}],"license":"MIT"},"id":48}